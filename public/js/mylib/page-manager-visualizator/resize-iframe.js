!function(e){var o=function(o,n){this._options=n;var r=this;r._last_cursor_Y=0,r._last_cursor_X=0,this._create=function(){var n=e("#"+r._options.nameIFrame).contents();o.append('<div class="rif-show-dimensions panel panel-primary"><div class="panel-body"><span class="rif-width btn btn-default btn-lg">0</span> X <span class="rif-height btn btn-default btn-lg">0</span></div></div>'),r._resize=!1,r._cursor_Y=0,r._cursor_X=0,n.find("body").on("mousemove",r._handlerMove),e("body").on("mousemove",r._handlerMove),e("body").on("keydown",r._handlerDown),n.find("body").on("keydown",r._handlerDown),e("body").on("keyup",r._handlerUp),n.find("body").on("keyup",r._handlerUp),e(window).on("resize",r._handlerResize),e(window[r._options.nameIFrame].window).on("resize",r._handlerResize)},this._destroy=function(){var n=e("#"+r._options.nameIFrame).contents();o.find(" .rif-show-dimensions").remove(),n.find("body").off("mousemove",r._handlerMove),e("body").off("mousemove",r._handlerMove),e("body").off("keydown",r._handlerDown),n.find("body").off("keydown",r._handlerDown),e("body").off("keyup",r._handlerUp),n.find("body").off("keyup",r._handlerUp),e(window).off("resize",r._handlerResize),e(window[r._options.nameIFrame].window).off("resize",r._handlerResize)},this.reload=function(){r._destroy(),r._create()},this._handlerDown=function(e){if(82==e.which&&e.ctrlKey&&!e.shiftKey&&!e.altKey){if(!r._resize){o.trigger("rif.start.resize");var n=o.find(" .rif-show-dimensions");n.attr("style","").css({display:"block"});var i=n.outerWidth(),s=n.outerHeight(),t=o.find(".pmv-outer-wrap").width(),a=o.find(".pmv-outer-wrap").height();n.css({width:Math.round(i),height:Math.round(s),top:Math.round((a-s)/2),left:Math.round((t-i)/2)}),r._resize=!0,r._cursor_X=!1,r._cursor_Y=!1,r._reloadShowDimensions()}return e.preventDefault?e.preventDefault():e.stop(),e.returnValue=!1,e.stopPropagation(),!1}},this._handlerUp=function(e){if(r._resize){var n=o.find(" .rif-show-dimensions");n.css({display:"none"}),r._resize=!1,o.trigger("rif.stop.resize")}},this._handlerResize=function(){r._centerIFrameAndNoEmptySpace(),r._reloadShowDimensions()},this._centerIFrameAndNoEmptySpace=function(){var o,n,i,s,t,a,d=e("#"+r._options.nameIFrame),_=d.closest(".pmv-fitting-wrap"),h=d.closest(".pmv-outer-wrap");o=_.width(),n=_.height(),s=_.position().top,t=_.position().left,i=h.width(),a=h.height(),o>i?(t+o<i&&_.css({left:Math.round(-o+i)}),t>0&&_.css({left:Math.round(0)})):_.css({left:Math.round((i-o)/2)}),n>a?s+n<a&&_.css({top:Math.round(-n+a)}):_.css({top:0})},this._reloadShowDimensions=function(){var n=e("#"+r._options.nameIFrame).closest(".pmv-fitting-wrap"),i=n.width(),s=n.height();o.find(" .rif-width").text(Math.round(i)),o.find(" .rif-height").text(Math.round(s))},this._handlerMove=function(o){if(r._last_cursor_X=o.screenX,r._last_cursor_Y=o.screenY,r._resize){r._cursor_Y===!1&&(r._cursor_X=r._last_cursor_X,r._cursor_Y=r._last_cursor_Y);var n=e("#"+r._options.nameIFrame),i=n.closest(".pmv-fitting-wrap"),s=i.width(),t=i.height();s+=o.screenX-r._cursor_X,t+=o.screenY-r._cursor_Y,r._cursor_X=o.screenX,r._cursor_Y=o.screenY,s<r._options.minWIFrame&&(s=r._options.minWIFrame),t<r._options.minHIFrame&&(t=r._options.minHIFrame),i.css({width:Math.round(s),height:Math.round(t)})}}};modules.resizeIFrame=o}(jQuery);
//# sourceMappingURL=resize-iframe.js.map
