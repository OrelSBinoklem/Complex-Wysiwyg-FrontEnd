!function(e){var o=function(o,n){this._options=n;var r=this;r._last_cursor_Y=0,r._last_cursor_X=0,this._create=function(){var n=e("#"+r._options.nameIFrame).contents();o.append('<div class="rif-show-dimensions panel panel-primary"><div class="panel-body"><span class="rif-width btn btn-default btn-lg">0</span> X <span class="rif-height btn btn-default btn-lg">0</span></div></div>'),r._resize=!1,r._cursor_Y=0,r._cursor_X=0,n.find("body").on("mousemove",r._handlerMove),e("body").on("mousemove",r._handlerMove),e("body").on("keydown",r._handlerDown),n.find("body").on("keydown",r._handlerDown),e("body").on("keyup",r._handlerUp),n.find("body").on("keyup",r._handlerUp),e(window).on("resize",r._handlerResize),e(window[r._options.nameIFrame].window).on("resize",r._handlerResize)},this._destroy=function(){var n=e("#"+r._options.nameIFrame).contents();o.find(" .rif-show-dimensions").remove(),n.find("body").off("mousemove",r._handlerMove),e("body").off("mousemove",r._handlerMove),e("body").off("keydown",r._handlerDown),n.find("body").off("keydown",r._handlerDown),e("body").off("keyup",r._handlerUp),n.find("body").off("keyup",r._handlerUp),e(window).off("resize",r._handlerResize),e(window[r._options.nameIFrame].window).off("resize",r._handlerResize)},this.reload=function(){r._destroy(),r._create()},this._handlerDown=function(e){if(82==e.which&&e.ctrlKey&&!e.shiftKey&&!e.altKey){if(!r._resize){o.trigger("rifStartResize");var n=o.find(" .rif-show-dimensions");n.attr("style","").css({display:"block"});var i=n.outerWidth(),t=n.outerHeight(),s=o.find(".pmv-outer-wrap").width(),a=o.find(".pmv-outer-wrap").height();n.css({width:Math.round(i),height:Math.round(t),top:Math.round((a-t)/2),left:Math.round((s-i)/2)}),r._resize=!0,r._cursor_X=!1,r._cursor_Y=!1,r._reloadShowDimensions()}return e.preventDefault?e.preventDefault():e.stop(),e.returnValue=!1,e.stopPropagation(),!1}},this._handlerUp=function(e){if(r._resize){o.find(" .rif-show-dimensions").css({display:"none"}),r._resize=!1,o.trigger("rifStopResize")}},this._handlerResize=function(){r._centerIFrameAndNoEmptySpace(),r._reloadShowDimensions()},this._centerIFrameAndNoEmptySpace=function(){var n,i,t,s,a,d,_=e("#"+r._options.nameIFrame),h=_.closest(".pmv-fitting-wrap"),f=_.closest(".pmv-outer-wrap");n=h.width(),i=h.height(),s=h.position().top,a=h.position().left,t=f.width(),d=f.height(),n>t?(a+n<t&&h.css({left:Math.round(-n+t)}),a>0&&h.css({left:Math.round(0)})):h.css({left:Math.round((t-n)/2)}),i>d?s+i<d&&h.css({top:Math.round(-i+d)}):h.css({top:0}),o.trigger("rif.center-iframe")},this._reloadShowDimensions=function(){var n=e("#"+r._options.nameIFrame).closest(".pmv-fitting-wrap"),i=n.width(),t=n.height();o.find(" .rif-width").text(Math.round(i)),o.find(" .rif-height").text(Math.round(t))},this._handlerMove=function(n){if(r._last_cursor_X=n.screenX,r._last_cursor_Y=n.screenY,r._resize){r._cursor_Y===!1&&(r._cursor_X=r._last_cursor_X,r._cursor_Y=r._last_cursor_Y);var i=e("#"+r._options.nameIFrame),t=i.closest(".pmv-fitting-wrap"),s=t.width(),a=t.height();s+=n.screenX-r._cursor_X,a+=n.screenY-r._cursor_Y,r._cursor_X=n.screenX,r._cursor_Y=n.screenY,s<r._options.minWIFrame&&(s=r._options.minWIFrame),a<r._options.minHIFrame&&(a=r._options.minHIFrame),t.css({width:Math.round(s),height:Math.round(a),maxHeight:""}),o.trigger("rifResize")}}};modules.resizeIFrame=o}(jQuery);
//# sourceMappingURL=resize-iframe.js.map
