!function(e){var i=function(i,o,a){this._options=a;var s=this;s.$container=i;var n=new modules.customScrollIFrame(i,this._options),r=new modules.mapNavigatorIFrame(i,this._options),t=new modules.resizeIFrame(i,this._options),l=new modules.fixationContentAtResize(i,this._options);n._initPasteHTML(),i.on("pmv.load.iframe",function(){n.reload()}),i.on({"pmv.load.iframe":r.reload,"rif.center-iframe":r.updateDraggable}),i.on("pmv.load.iframe",t.reload),i.on({"pmv.load.iframe":l.reload,"rif.start.resize":l.startFixation,"rif.stop.resize":l.stopFixation}),this._create=function(){this._init(),i.on("wheel",n._handlerMouseWheel)},this._destroy=function(){i.off("wheel",n._handlerMouseWheel),i.find(".pmv-outer-wrap").remove()},this._init=function(){i.append('<div class="pmv-outer-wrap"><div class="pmv-fitting-wrap"></div></div>'),i.append('<div class="pmv-container-bl"></div><div class="pmv-container-bb"></div><div class="pmv-container-br"></div>'),s.localSession=o.getLocalSessionParams(),a.pageList={},s._restoreSession("pagelist"),i.on("pmv.load.iframe",function(){s._restoreSession("size_iframe"),s._restoreSession("scroll_iframe"),s._restoreSession("position_iframe"),t._centerIFrameAndNoEmptySpace()})},this.handlerSelectPage=function(e){s.currentPage=e,s._destroyIFrame(),null!==e&&s._createIFrame(e),i.trigger("pmv.user.changepage")},this.selectPage=function(e){s.currentPage=e,s._destroyIFrame(),null!==e&&s._createIFrame(e)},this._createIFrame=function(o){i.trigger("pmv.prepaste.iframe"),s.lastLoadPage=o,s.currentPage=o,i.find(".pmv-fitting-wrap").append('<iframe id="'+s._options.nameIFrame+'" name="'+s._options.nameIFrame+'" src="'+o+'" width="100%" height="100%"></iframe>'),e("#"+s._options.nameIFrame).load(function(){i.trigger("pmv.load.iframe"),e("#"+s._options.nameIFrame).contents().find("body").on("click",function(i){e("body").trigger("click.body.iframe")})})},this._destroyIFrame=function(){e("#"+s._options.nameIFrame).remove()},this._restoreSession=function(i){switch(i){case"pagelist":s.localSession&&"pages"in s.localSession&&s.selectPage("/"+s.localSession.pages.currentPage);break;case"scroll_iframe":var o=window[s._options.nameIFrame];s.localSession&&"iframe"in s.localSession&&(e(o.window).scrollTop(s.localSession.iframe.scroll.top),e(o.window).scrollLeft(s.localSession.iframe.scroll.left));break;case"position_iframe":var a=e("#"+s._options.nameIFrame),n=a.closest(".pmv-fitting-wrap");s.localSession&&"iframe"in s.localSession&&n.css({left:s.localSession.iframe.position.top,top:s.localSession.iframe.position.left});break;case"size_iframe":var a=e("#"+s._options.nameIFrame),n=a.closest(".pmv-fitting-wrap");s.localSession&&"iframe"in s.localSession&&n.css({width:s.localSession.iframe.size.w,height:s.localSession.iframe.size.h})}},this._saveSession=function(){}};modules.pageManagerVisualizator=i}(jQuery);
//# sourceMappingURL=page-manager-visualizator.js.map
