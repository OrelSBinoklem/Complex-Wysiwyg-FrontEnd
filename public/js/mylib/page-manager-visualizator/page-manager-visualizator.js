!function(t){var i=function(i,e,o){this._options=o;var a=this;a.$container=i;var n=new modules.customScrollIFrame(i,this._options),s=new modules.mapNavigatorIFrame(i,this._options),r=new modules.resizeIFrame(i,this._options),p=new modules.fixationContentAtResize(i,this._options);n._initPasteHTML(),i.on("pmv.load.iframe",function(){n.reload()}),i.on({"pmv.load.iframe":s.reload,"rif.center-iframe":s.updateDraggable}),i.on("pmv.load.iframe",r.reload),i.on({"pmv.load.iframe":p.reload,rifStartResize:p.startFixation,rifStopResize:p.stopFixation}),this.setSizeIFrame=function(i,e,o){var n,s=t("#"+a._options.nameIFrame).closest(".pmv-fitting-wrap");if(i=parseInt(i),"auto"==e?(n=Math.round(i/a._options.heightCalculateRatio))<a._options.minHeightCalculateAuto&&(n=a._options.minHeightCalculateAuto):n=e,o)p.startFixation(),"auto"==e&&a._options.calculatedHeightAsMaxHeight?s.stop().css({width:i+"px",height:"100%",maxHeight:n+"px"}):s.stop().css({width:i+"px",height:n+"px",maxHeight:""}),p.stopFixation();else if(p.startFixation(),"auto"==e&&a._options.calculatedHeightAsMaxHeight){var r=t("#"+a._options.nameIFrame).closest(".pmv-outer-wrap");s.css({height:s.height()+"px",maxHeight:""}),s.stop().animate({width:i+"px",height:(n<r.height()?n:r.height())+"px"},1e3,"swing",function(){s.stop().css({width:i+"px",height:"100%",maxHeight:n+"px"}),p.stopFixation()})}else s.css({maxHeight:""}),s.stop().animate({width:i+"px",height:n+"px"},1e3,"swing",function(){p.stopFixation()})},this.setPositionIFrame=function(i,e){var o,n,s,p,h,m,c=t("#"+a._options.nameIFrame),d=c.closest(".pmv-fitting-wrap"),l=c.closest(".pmv-outer-wrap");o=d.width(),n=d.height(),s=l.width(),p=l.height(),h=Math.round((s-o)*i),m=Math.round((p-n)*e),d.css({top:m,left:h}),r._centerIFrameAndNoEmptySpace()},this.setScrollIFrame=function(i,e){var o,n,s,r,p,h,m=window[a._options.nameIFrame];o=t(m.window).width(),n=t(m.document).width(),r=t(m.window).height(),p=t(m.document).height(),s=Math.round((n-o)*i),h=Math.round((p-r)*e),t(m.window).scrollLeft(s<0?0:s),t(m.window).scrollTop(h<0?0:h)},this._create=function(){this._init(),i.on("wheel",n._handlerMouseWheel)},this._destroy=function(){i.off("wheel",n._handlerMouseWheel),i.find(".pmv-outer-wrap").remove()},this._init=function(){i.append('<div class="pmv-outer-wrap"><div class="pmv-fitting-wrap"></div></div>'),i.append('<div class="pmv-container-bl"></div><div class="pmv-container-bb"></div><div class="pmv-container-br"></div>'),a.localSession=e.getLocalSessionParams(),o.pageList={}},this.selectPage=function(t){a.currentPage=t,a._destroyIFrame(),null!==t&&a._createIFrame(t)},this._createIFrame=function(e){i.trigger("pmv.prepaste.iframe"),a.lastLoadPage=e,a.currentPage=e,i.find(".pmv-fitting-wrap").append('<iframe id="'+a._options.nameIFrame+'" name="'+a._options.nameIFrame+'" src="'+e+'" width="100%" height="100%"></iframe>'),t("#"+a._options.nameIFrame).load(function(){i.trigger("pmv.load.iframe"),t("#"+a._options.nameIFrame).contents().find("body").on("click",function(i){t("body").trigger("click.body.iframe")})})},this._destroyIFrame=function(){t("#"+a._options.nameIFrame).remove()},this._saveSession=function(){}};modules.pageManagerVisualizator=i}(jQuery);
//# sourceMappingURL=page-manager-visualizator.js.map
