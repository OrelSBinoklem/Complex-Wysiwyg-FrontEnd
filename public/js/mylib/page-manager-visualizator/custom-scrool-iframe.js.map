{"version":3,"sources":["js/mylib/page-manager-visualizator/custom-scrool-iframe.js"],"names":["$","customScrollIFrame","$container","options","this","_options","____","$fix_animate","_create","_initPasteHTML","$iFrame","contents","find","append","css","overflow","_Y_Scrollable","_X_Scrollable","_cursor_Y","_cursor_X","_topScrollIFrameTemp","_leftScrollIFrameTemp","window","nameIFrame","on","updateOuterScroll","_handlerDown_Y","_handlerDown_X","_handlerUp","_handlerMove","_handlerArrowTop","_handlerArrowBottom","_handlerArrowLeft","_handlerArrowRight","_handlerArrowLeave","_handlerMouseWheel","_destroy","remove","off","reload","wWindow","hWindow","wDocument","hDocument","topScroll","leftScroll","wOuterScroll","hOuterScroll","hConOuterScroll","wConOuterScroll","topMargin","leftMargin","iframe","width","height","document","scrollTop","scrollLeft","Math","round","minHOuterScroll","minWOuterScroll","marginTop","marginLeft","e","screenY","screenX","resTopScroll","resLeftScroll","oneStepVertical","oneStepGorizontal","trigger","addClass","top","stop","animate","duration","pixelsScrollableInSeconds","easing","complete","step","now","fx","left","removeClass","_mouseWheelAnimated","_tempWheelAnimated","sign","number","undefined","deltaY","originalEvent","wheelDelta","test","navigator","userAgent","abs","modules","jQuery"],"mappings":"CAAA,SAAUA,GAEV,GAOIC,GAAqB,SAASC,EAAYC,GAC1CC,KAAKC,SAAWF,CAChB,IAAIG,GAAOF,IAGXE,GAAKC,aAAeP,EAAG,wCAEvBI,KAAKI,QAAU,WAEXF,EAAKG,gBAGL,IAAIC,GAAUV,EAAE,IAAKM,EAAKD,SAAmB,YAAGM,UAChDD,GAAQE,KAAK,SAASC,OAAO,kMAa7BH,EAAQE,KAAK,SAASE,KAAKC,SAAU,WAGrCT,EAAKU,eAAgB,EACrBV,EAAKW,eAAgB,EACrBX,EAAKY,UAAY,EACjBZ,EAAKa,UAAY,EACjBb,EAAKc,qBAAuB,EAC5Bd,EAAKe,sBAAwB,EAG7BrB,EAAEsB,OAAOhB,EAAKD,SAASkB,YAAYD,QAAQE,GAAG,gBAAiBlB,EAAKmB,mBACpEzB,EAAEsB,QAAQE,GAAG,SAAUlB,EAAKmB,mBAE5BvB,EAAWU,KAAK,oCAAoCY,GAAG,YAAalB,EAAKoB,gBACzExB,EAAWU,KAAK,oCAAoCY,GAAG,YAAalB,EAAKqB,gBACzEjB,EAAQE,KAAK,QAAQY,GAAG,UAAWlB,EAAKsB,YACxC5B,EAAE,QAAQwB,GAAG,UAAWlB,EAAKsB,YAC7BlB,EAAQE,KAAK,QAAQY,GAAG,YAAalB,EAAKuB,cAC1C7B,EAAE,QAAQwB,GAAG,YAAalB,EAAKuB,cAE/B3B,EAAWU,KAAK,oCAAoCY,GAAG,YAAalB,EAAKwB,kBACzE5B,EAAWU,KAAK,uCAAuCY,GAAG,YAAalB,EAAKyB,qBAC5E7B,EAAWU,KAAK,qCAAqCY,GAAG,YAAalB,EAAK0B,mBAC1E9B,EAAWU,KAAK,sCAAsCY,GAAG,YAAalB,EAAK2B,oBAC3E/B,EAAWU,KAAK,gCAAgCY,GAAG,qBAAsBlB,EAAK4B,oBAC9EhC,EAAWU,KAAK,gCAAgCY,GAAG,qBAAsBlB,EAAK4B,oBAE9ExB,EAAQE,KAAK,QAAQY,GAAG,QAASlB,EAAK6B,oBAGrC7B,EAAKmB,qBAGVrB,KAAKgC,SAAW,WACZ,GAAI1B,GAAUV,EAAE,IAAKM,EAAKD,SAAmB,YAAGM,UAEhDT,GAAWU,KAAK,yBAAyByB,SACzCnC,EAAWU,KAAK,yBAAyByB,SACzCnC,EAAWU,KAAK,iBAAiByB,SAEjCrC,EAAEsB,QAAQgB,IAAI,SAAUhC,EAAKmB,mBAE7Bf,EAAQE,KAAK,QAAQ0B,IAAI,UAAWhC,EAAKsB,YACzC5B,EAAE,QAAQsC,IAAI,UAAWhC,EAAKsB,YAC9BlB,EAAQE,KAAK,QAAQ0B,IAAI,YAAahC,EAAKuB,cAC3C7B,EAAE,QAAQsC,IAAI,YAAahC,EAAKuB,cAEhC3B,EAAWU,KAAK,oCAAoC0B,IAAI,YAAahC,EAAKwB,kBAC1E5B,EAAWU,KAAK,uCAAuC0B,IAAI,YAAahC,EAAKyB,qBAC7E7B,EAAWU,KAAK,qCAAqC0B,IAAI,YAAahC,EAAK0B,mBAC3E9B,EAAWU,KAAK,sCAAsC0B,IAAI,YAAahC,EAAK2B,oBAC5E/B,EAAWU,KAAK,gCAAgC0B,IAAI,qBAAsBhC,EAAK4B,oBAC/EhC,EAAWU,KAAK,gCAAgC0B,IAAI,qBAAsBhC,EAAK4B,oBAE/ExB,EAAQE,KAAK,QAAQ0B,IAAI,QAAShC,EAAK6B,qBAG3C/B,KAAKmC,OAAS,WACVjC,EAAK8B,WACL9B,EAAKE,WAITJ,KAAKK,eAAiB,WAClBP,EAAWW,OAAO,2gCA4CtBT,KAAKqB,kBAAoB,WACrB,GAEIe,GAASC,EAASC,EAAWC,EAAWC,EAAWC,EACvDC,EAAcC,EAAcC,EAAiBC,EAAiBC,EAAWC,EAHrEC,EAAS9B,OAAOhB,EAAKD,SAASkB,WACpBvB,GAAE,IAAKM,EAAKD,SAAmB,YAAGM,UAIhD6B,GAAUxC,EAAEoD,EAAO9B,QAAQ+B,QAC3BZ,EAAUzC,EAAEoD,EAAO9B,QAAQgC,SAC3BZ,EAAY1C,EAAEoD,EAAOG,UAAUF,QAC/BV,EAAY3C,EAAEoD,EAAOG,UAAUD,SAG/BV,EAAY5C,EAAEoD,EAAO9B,QAAQkC,YAC7BX,EAAa7C,EAAEoD,EAAO9B,QAAQmC,aAG9BT,EAAkB9C,EAAWU,KAAK,8CAA8C0C,SAChFL,EAAkB/C,EAAWU,KAAK,8CAA8CyC,QAGhFN,EAAeW,KAAKC,MAAMlB,EAAUE,EAAYK,GAC7CD,EAAezC,EAAKD,SAASuD,kBAE5Bb,EAAezC,EAAKD,SAASuD,iBAEjCV,EAAYQ,KAAKC,MAAMf,GAAaD,EAAYF,IAAYO,EAAkBD,IAE9ED,EAAeY,KAAKC,MAAMnB,EAAUE,EAAYO,GAC7CH,EAAexC,EAAKD,SAASwD,kBAE5Bf,EAAexC,EAAKD,SAASwD,iBAEjCV,EAAaO,KAAKC,MAAMd,GAAcH,EAAYF,IAAYS,EAAkBH,IAEhF5C,EAAWU,KAAK,oCAAoCE,KAAKwC,OAAQP,EAAce,UAAWZ,IAC1FhD,EAAWU,KAAK,oCAAoCE,KAAKuC,MAAOP,EAAciB,WAAYZ,KAI9F/C,KAAKsB,eAAiB,SAASsC,GAC3B1D,EAAKU,eAAgB,EACrBV,EAAKY,UAAY8C,EAAEC,QACnB3D,EAAKc,qBAAuBpB,EAAEsB,OAAOhB,EAAKD,SAASkB,YAAYD,QAAQkC,aAI3EpD,KAAKuB,eAAiB,SAASqC,GAC3B1D,EAAKW,eAAgB,EACrBX,EAAKa,UAAY6C,EAAEE,QACnB5D,EAAKe,sBAAwBrB,EAAEsB,OAAOhB,EAAKD,SAASkB,YAAYD,QAAQmC,cAI5ErD,KAAKwB,WAAa,WACdtB,EAAKU,eAAgB,EACrBV,EAAKW,eAAgB,GAIzBb,KAAKyB,aAAe,SAASmC,GACzB,GAAI1D,EAAKU,eAAiBV,EAAKW,cAC/B,CACI,GAEIuB,GAASC,EAASC,EAAWC,EACjCG,EAAcC,EAAcC,EAAiBC,EAC7CkB,EAAcC,EAAeC,EAAiBC,EAJ1ClB,EAAS9B,OAAOhB,EAAKD,SAASkB,WACpBvB,GAAE,IAAKM,EAAKD,SAAmB,YAAGM,UAKhD6B,GAAUxC,EAAEoD,EAAO9B,QAAQ+B,QAC3BZ,EAAUzC,EAAEoD,EAAO9B,QAAQgC,SAC3BZ,EAAY1C,EAAEoD,EAAOG,UAAUF,QAC/BV,EAAY3C,EAAEoD,EAAOG,UAAUD,SAGnBtD,EAAEoD,EAAO9B,QAAQkC,YAChBxD,EAAEoD,EAAO9B,QAAQmC,aAG9BT,EAAkB9C,EAAWU,KAAK,8CAA8C0C,SAChFL,EAAkB/C,EAAWU,KAAK,8CAA8CyC,QAGhFN,EAAeN,EAAUE,EAAYK,EAClCD,EAAezC,EAAKD,SAASuD,kBAE5Bb,EAAezC,EAAKD,SAASuD,iBAGjCd,EAAeN,EAAUE,EAAYO,EAClCH,EAAexC,EAAKD,SAASwD,kBAE5Bf,EAAexC,EAAKD,SAASwD,iBAG9BvD,EAAKU,gBAEJqD,GAAmB1B,EAAYF,IAAYO,EAAkBD,GAC7DoB,EAAeT,KAAKC,OAAOK,EAAEC,QAAU3D,EAAKY,WAAamD,EAAkB/D,EAAKc,sBAC7E+C,EAAe,IAEdA,EAAe,GAEhBA,EAAexB,EAAYF,IAE1B0B,EAAexB,EAAYF,GAExCzC,EAAEoD,EAAO9B,QAAQkC,UAAUW,GAClBjE,EAAWqE,QAAQ,gBAGpBjE,EAAKW,gBAEJqD,GAAqB5B,EAAYF,IAAYS,EAAkBH,GAC/DsB,EAAgBV,KAAKC,OAAOK,EAAEE,QAAU5D,EAAKa,WAAamD,EAAoBhE,EAAKe,uBAChF+C,EAAgB,IAEfA,EAAgB,GAEjBA,EAAgB1B,EAAYF,IAE3B4B,EAAgB1B,EAAYF,GAEzCxC,EAAEoD,EAAO9B,QAAQmC,WAAWW,GACnBlE,EAAWqE,QAAQ,kBAM/BnE,KAAK0B,iBAAmB,WACpB,GAAIsB,GAAS9B,OAAOhB,EAAKD,SAASkB,WAClCvB,GAAEI,MAAMoE,SAAS,SAEjB,IAAI5B,GAAY5C,EAAEoD,EAAO9B,QAAQkC,WAEjClD,GAAKC,aAAaO,KAAK2D,IAAK7B,IAC5BtC,EAAKC,aAAamE,OAAOC,SAASF,IAAK,IAEnCG,SAAUlB,KAAKC,MAAMf,EAAYtC,EAAKD,SAASwE,0BAA4B,KAC3EC,OAAQ,SACRC,SAAU,WAClB/E,EAAEoD,EAAO9B,QAAQkC,UAAU,GACftD,EAAWqE,QAAQ,gBAEvBS,KAAM,SAASC,EAAIC,GAC3BlF,EAAEoD,EAAO9B,QAAQkC,UAAUyB,GACf/E,EAAWqE,QAAQ,mBAM/BnE,KAAK2B,oBAAsB,WACvB,GAAIqB,GAAS9B,OAAOhB,EAAKD,SAASkB,WAClCvB,GAAEI,MAAMoE,SAAS,SACjB,IAAI/B,GAASE,EAAWC,CAExBH,GAAUzC,EAAEoD,EAAO9B,QAAQgC,SAC3BX,EAAY3C,EAAEoD,EAAOG,UAAUD,SAC/BV,EAAY5C,EAAEoD,EAAO9B,QAAQkC,WAEnC,IAAIW,GAAexB,EAAYF,CAEzBnC,GAAKC,aAAaO,KAAK2D,IAAK7B,IAC5BtC,EAAKC,aAAamE,OAAOC,SAASF,IAAKN,IAEnCS,SAAUlB,KAAKC,OAAOhB,EAAYF,EAAUG,GAAatC,EAAKD,SAASwE,0BAA4B,KACnGC,OAAQ,SACRC,SAAU,WAClB/E,EAAEoD,EAAO9B,QAAQkC,UAAUW,GACfjE,EAAWqE,QAAQ,gBAEvBS,KAAM,SAASC,EAAIC,GAC3BlF,EAAEoD,EAAO9B,QAAQkC,UAAUyB,GACf/E,EAAWqE,QAAQ,mBAK/BnE,KAAK4B,kBAAoB,WACrB,GAAIoB,GAAS9B,OAAOhB,EAAKD,SAASkB,WAClCvB,GAAEI,MAAMoE,SAAS,SAEjB,IAAI3B,GAAa7C,EAAEoD,EAAO9B,QAAQmC,YAElCnD,GAAKC,aAAaO,KAAKqE,KAAMtC,IAC7BvC,EAAKC,aAAamE,OAAOC,SAASQ,KAAM,IAEpCP,SAAUlB,KAAKC,MAAMd,EAAavC,EAAKD,SAASwE,0BAA4B,KAC5EC,OAAQ,SACRC,SAAU,WAClB/E,EAAEoD,EAAO9B,QAAQmC,WAAW,GAChBvD,EAAWqE,QAAQ,gBAEvBS,KAAM,SAASC,EAAIC,GAC3BlF,EAAEoD,EAAO9B,QAAQmC,WAAWwB,GAChB/E,EAAWqE,QAAQ,mBAM/BnE,KAAK6B,mBAAqB,WACtB,GAAImB,GAAS9B,OAAOhB,EAAKD,SAASkB,WAClCvB,GAAEI,MAAMoE,SAAS,SACjB,IAAIhC,GAASE,EAAWG,CAExBL,GAAUxC,EAAEoD,EAAO9B,QAAQ+B,QAC3BX,EAAY1C,EAAEoD,EAAOG,UAAUF,QAC/BR,EAAa7C,EAAEoD,EAAO9B,QAAQmC,YAEpC,IAAIW,GAAgB1B,EAAYF,CAE1BlC,GAAKC,aAAaO,KAAKqE,KAAMtC,IAC7BvC,EAAKC,aAAamE,OAAOC,SAASQ,KAAMf,IAEpCQ,SAAUlB,KAAKC,OAAOjB,EAAYF,EAAUK,GAAcvC,EAAKD,SAASwE,0BAA4B,KACpGC,OAAQ,SACRC,SAAU,WAClB/E,EAAEoD,EAAO9B,QAAQmC,WAAWW,GAChBlE,EAAWqE,QAAQ,gBAEvBS,KAAM,SAASC,EAAIC,GAC3BlF,EAAEoD,EAAO9B,QAAQmC,WAAWwB,GAChB/E,EAAWqE,QAAQ,mBAM/BnE,KAAK8B,mBAAqB,WACtB5B,EAAKC,aAAamE,OAClB1E,EAAEI,MAAMgF,YAAY,WAIxBhF,KAAKiF,qBAAsB,EAC3BjF,KAAKkF,mBAAqB,EAC1BlF,KAAK+B,mBAAqB,SAAS6B,GAmC3B,QAASuB,GAAKC,GACV,MAAIA,GAAS,EACF,EACW,IAAXA,EACA,GAEA,EAxCnB,GAAwCC,SAArCnE,OAAOhB,EAAKD,SAASkB,YAA2B,CAC/C,GAAImE,EACD,iBAAkB1B,GAAE2B,eACnBD,EAAS1B,EAAE2B,cAAcD,SAAU,EAAK1B,EAAE2B,cAAcC,WACxDF,GAAU,IACH,SAASG,KAAKC,UAAUC,WAE3BL,GADC1B,EAAE2B,cAAcD,SAAU,EAAK1B,EAAE2B,cAAcC,YAAc,EACrD,KAEA,IAEN,YAAYC,KAAKC,UAAUC,YAClCL,EAAS1B,EAAE2B,cAAcD,SAAU,EAAK1B,EAAE2B,cAAcC,WACxDF,GAAU,KAEVA,EAAS1B,EAAE2B,cAAcD,SAAU,EAAK1B,EAAE2B,cAAcC,WACrDlC,KAAKsC,IAAIN,GAAU,KAClBA,GAAU,KAIlB,IAAItC,GAAS9B,OAAOhB,EAAKD,SAASkB,WAElCqB,WAAY5C,EAAEoD,EAAO9B,QAAQkC,YACzBlD,EAAK+E,oBAEFE,EAAKjF,EAAKgF,mBAAqB1C,aAAe2C,EAAKG,GAClDpF,EAAKgF,mBAAqB1C,UAAY8C,EAEtCpF,EAAKgF,oBAAsBI,EAG/BpF,EAAKgF,mBAAqB1C,UAAY8C,EAY1CpF,EAAK+E,qBAAsB,EAE3B/E,EAAKC,aAAaO,KAAK2D,IAAK7B,YAC5BtC,EAAKC,aAAamE,OAAOC,SAASF,IAAKnE,EAAKgF,qBAEpCV,SAAU,IACVE,OAAQ,SACRC,SAAU,WACN/E,EAAEoD,EAAO9B,QAAQkC,UAAUlD,EAAKgF,oBAChChF,EAAK+E,qBAAsB,EAE3BnF,EAAWqE,QAAQ,gBAEvBS,KAAM,SAASC,EAAIC,GACflF,EAAEoD,EAAO9B,QAAQkC,UAAUyB,GAE3B/E,EAAWqE,QAAQ,oBAO3C0B,SAAQhG,mBAAqBA,GAE1BiG","file":"custom-scrool-iframe.js","sourcesContent":["(function($){//Модули: \r\n//Скролл лучше неуменьшать оно и так идёт поверх контента\r\nvar defaultOptions = {\r\n    nameIFrame: \"\",\r\n    pixelsScrollableInSeconds: 2000,\r\n    minWOuterScroll: 23,\r\n    minHOuterScroll: 23\r\n};\r\n\r\nvar customScrollIFrame = function($container, options) {\r\n    this._options = options;\r\n    var ____ = this;\r\n\r\n    //хак для плавности скролла в ie11\r\n    ____.$fix_animate = $( '<div class=\"csif-fix-animate\"></div>' );\r\n    \r\n    this._create = function() {\r\n        //Вставка HTML скроллов\r\n        ____._initPasteHTML();\r\n        \r\n        //Скрыть скролл в iFrame\r\n        var $iFrame = $('#'+(____._options.nameIFrame)).contents();\r\n        $iFrame.find(' head').append('\\n\\\r\n            <style id=\"csif-clear-scroll-body\" type=\"text/css\">\\n\\\r\n                body {\\n\\\r\n                    overflow: hidden !important;\\n\\\r\n                }\\n\\\r\n            </style>\\n\\\r\n        ');\r\n        $iFrame.find(' body').css({overflow: \"hidden\"});\r\n        \r\n        //Свойства для ползунков\r\n        ____._Y_Scrollable = false;\r\n        ____._X_Scrollable = false;\r\n        ____._cursor_Y = 0;\r\n        ____._cursor_X = 0;\r\n        ____._topScrollIFrameTemp = 0;\r\n        ____._leftScrollIFrameTemp = 0;\r\n        \r\n        //Установка обработчиков событий\r\n        $(window[____._options.nameIFrame].window).on(\"resize scroll\", ____.updateOuterScroll);\r\n        $(window).on(\"resize\", ____.updateOuterScroll);\r\n        \r\n        $container.find(' .csif-outer-scroll-v .scrolling').on('mousedown', ____._handlerDown_Y);\r\n        $container.find(' .csif-outer-scroll-g .scrolling').on('mousedown', ____._handlerDown_X);\r\n        $iFrame.find('body').on('mouseup', ____._handlerUp);\r\n        $('body').on('mouseup', ____._handlerUp);\r\n        $iFrame.find('body').on('mousemove', ____._handlerMove);\r\n        $('body').on('mousemove', ____._handlerMove);\r\n        \r\n        $container.find(' .csif-outer-scroll-v .arrow-top').on('mousedown', ____._handlerArrowTop);\r\n        $container.find(' .csif-outer-scroll-v .arrow-bottom').on('mousedown', ____._handlerArrowBottom);\r\n        $container.find(' .csif-outer-scroll-g .arrow-left').on('mousedown', ____._handlerArrowLeft);\r\n        $container.find(' .csif-outer-scroll-g .arrow-right').on('mousedown', ____._handlerArrowRight);\r\n        $container.find(' .csif-outer-scroll-v .arrow').on('mouseup mouseleave', ____._handlerArrowLeave);\r\n        $container.find(' .csif-outer-scroll-g .arrow').on('mouseup mouseleave', ____._handlerArrowLeave);\r\n        \r\n        $iFrame.find('body').on('wheel', ____._handlerMouseWheel);\r\n        \r\n        //Первое выполнение\r\n         ____.updateOuterScroll();\r\n    }\r\n    \r\n    this._destroy = function() {\r\n        var $iFrame = $('#'+(____._options.nameIFrame)).contents();\r\n        \r\n        $container.find(\" .csif-outer-scroll-v\").remove();\r\n        $container.find(\" .csif-outer-scroll-g\").remove();\r\n        $container.find(\" .csif-square\").remove();\r\n        \r\n        $(window).off(\"resize\", ____.updateOuterScroll);\r\n        \r\n        $iFrame.find('body').off('mouseup', ____._handlerUp);\r\n        $('body').off('mouseup', ____._handlerUp);\r\n        $iFrame.find('body').off('mousemove', ____._handlerMove);\r\n        $('body').off('mousemove', ____._handlerMove);\r\n\r\n        $container.find(' .csif-outer-scroll-v .arrow-top').off('mousedown', ____._handlerArrowTop);\r\n        $container.find(' .csif-outer-scroll-v .arrow-bottom').off('mousedown', ____._handlerArrowBottom);\r\n        $container.find(' .csif-outer-scroll-g .arrow-left').off('mousedown', ____._handlerArrowLeft);\r\n        $container.find(' .csif-outer-scroll-g .arrow-right').off('mousedown', ____._handlerArrowRight);\r\n        $container.find(' .csif-outer-scroll-v .arrow').off('mouseup mouseleave', ____._handlerArrowLeave);\r\n        $container.find(' .csif-outer-scroll-g .arrow').off('mouseup mouseleave', ____._handlerArrowLeave);\r\n        \r\n        $iFrame.find('body').off('wheel', ____._handlerMouseWheel);\r\n    }\r\n    \r\n    this.reload = function() {\r\n        ____._destroy();\r\n        ____._create();\r\n    }\r\n    \r\n    //Просто вставка html\r\n    this._initPasteHTML = function() {\r\n        $container.append('\\n\\\r\n            <div class=\"csif-outer-scroll-v\">\\n\\\r\n                <div class=\"csif-container\">\\n\\\r\n                    <div class=\"arrow arrow-top\"><i class=\"glyphicon glyphicon-chevron-up\"></i></div>\\n\\\r\n                    <div class=\"arrow arrow-bottom\"><i class=\"glyphicon glyphicon-chevron-down\"></i></div>\\n\\\r\n                    <div class=\"scrolling-container\">\\n\\\r\n                        <div class=\"scrolling\"></div>\\n\\\r\n                    </div>\\n\\\r\n                </div>\\n\\\r\n            </div>\\n\\\r\n            <div class=\"csif-outer-scroll-g\">\\n\\\r\n                <div class=\"csif-container\">\\n\\\r\n                    <div class=\"arrow arrow-left\"><i class=\"glyphicon glyphicon-chevron-left\"></i></div>\\n\\\r\n                    <div class=\"arrow arrow-right\"><i class=\"glyphicon glyphicon-chevron-right\"></i></div>\\n\\\r\n                    <div class=\"scrolling-container\">\\n\\\r\n                        <div class=\"scrolling\"></div>\\n\\\r\n                    </div>\\n\\\r\n                </div>\\n\\\r\n            </div>\\n\\\r\n            <div class=\"csif-square\"></div>\\n\\\r\n        ');\r\n    }\r\n    \r\n    //Обновление ползунков \"Внешнего скролла\"\r\n    this.updateOuterScroll = function() {\r\n        var iframe = window[____._options.nameIFrame];\r\n        var $iframe = $('#'+(____._options.nameIFrame)).contents();\r\n        var wWindow, hWindow, wDocument, hDocument, topScroll, leftScroll,\r\n        wOuterScroll, hOuterScroll, hConOuterScroll, wConOuterScroll, topMargin, leftMargin;\r\n        \r\n        wWindow = $(iframe.window).width();\r\n        hWindow = $(iframe.window).height();\r\n        wDocument = $(iframe.document).width();\r\n        hDocument = $(iframe.document).height();\r\n        \r\n        //Узнаем прокрутку\r\n        topScroll = $(iframe.window).scrollTop();\r\n        leftScroll = $(iframe.window).scrollLeft();\r\n        //==========\r\n        \r\n        hConOuterScroll = $container.find(' .csif-outer-scroll-v .scrolling-container').height();\r\n        wConOuterScroll = $container.find(' .csif-outer-scroll-g .scrolling-container').width();\r\n        \r\n        //Вычисляем размеры элементов \"за которые можно прокручивать\" на внешнем скролле и отступы для смешения чтоб показать насколько прокручена страница\r\n        hOuterScroll = Math.round(hWindow / hDocument * hConOuterScroll);\r\n        if(hOuterScroll < ____._options.minHOuterScroll)\r\n        {\r\n            hOuterScroll = ____._options.minHOuterScroll;\r\n        }\r\n        topMargin = Math.round(topScroll / (hDocument - hWindow) * (hConOuterScroll - hOuterScroll));\r\n        \r\n        wOuterScroll = Math.round(wWindow / wDocument * wConOuterScroll);\r\n        if(wOuterScroll < ____._options.minWOuterScroll)\r\n        {\r\n            wOuterScroll = ____._options.minWOuterScroll;\r\n        }\r\n        leftMargin = Math.round(leftScroll / (wDocument - wWindow) * (wConOuterScroll - wOuterScroll));\r\n        //==========\r\n        $container.find(' .csif-outer-scroll-v .scrolling').css({height: hOuterScroll, marginTop: topMargin});\r\n        $container.find(' .csif-outer-scroll-g .scrolling').css({width: wOuterScroll, marginLeft: leftMargin});\r\n    }\r\n    \r\n    //Нажатие на вертикальный ползунок\r\n    this._handlerDown_Y = function(e) {\r\n        ____._Y_Scrollable = true;\r\n        ____._cursor_Y = e.screenY;\r\n        ____._topScrollIFrameTemp = $(window[____._options.nameIFrame].window).scrollTop();\r\n    }\r\n    \r\n    //Нажатие на горизонтальный ползунок\r\n    this._handlerDown_X = function(e) {\r\n        ____._X_Scrollable = true;\r\n        ____._cursor_X = e.screenX;\r\n        ____._leftScrollIFrameTemp = $(window[____._options.nameIFrame].window).scrollLeft();\r\n    }\r\n    \r\n    //Отпускание мыши с ползунка\r\n    this._handlerUp = function() {\r\n        ____._Y_Scrollable = false;\r\n        ____._X_Scrollable = false;\r\n    }\r\n    \r\n    //Обновление скрытого скролла в IFrame\r\n    this._handlerMove = function(e) {\r\n        if( ____._Y_Scrollable || ____._X_Scrollable )\r\n        {\r\n            var iframe = window[____._options.nameIFrame];\r\n            var $iframe = $(\"#\"+(____._options.nameIFrame)).contents();\r\n            var wWindow, hWindow, wDocument, hDocument, topScroll, leftScroll,\r\n            wOuterScroll, hOuterScroll, hConOuterScroll, wConOuterScroll,\r\n            resTopScroll, resLeftScroll, oneStepVertical, oneStepGorizontal;\r\n            \r\n            wWindow = $(iframe.window).width();\r\n            hWindow = $(iframe.window).height();\r\n            wDocument = $(iframe.document).width();\r\n            hDocument = $(iframe.document).height();\r\n            \r\n            //Узнаем прокрутку\r\n            topScroll = $(iframe.window).scrollTop();\r\n            leftScroll = $(iframe.window).scrollLeft();\r\n            //==========\r\n            \r\n            hConOuterScroll = $container.find(' .csif-outer-scroll-v .scrolling-container').height();\r\n            wConOuterScroll = $container.find(' .csif-outer-scroll-g .scrolling-container').width();\r\n            \r\n            //Вычисляем размеры элементов \"за которые можно прокручивать\" на внешнем скролле и отступы для смешения чтоб показать насколько прокручена страница\r\n            hOuterScroll = hWindow / hDocument * hConOuterScroll;\r\n            if(hOuterScroll < ____._options.minHOuterScroll)\r\n            {\r\n                hOuterScroll = ____._options.minHOuterScroll;\r\n            }\r\n            \r\n            wOuterScroll = wWindow / wDocument * wConOuterScroll;\r\n            if(wOuterScroll < ____._options.minWOuterScroll)\r\n            {\r\n                wOuterScroll = ____._options.minWOuterScroll;\r\n            }\r\n            //==========\r\n            if(____._Y_Scrollable)\r\n            {\r\n                oneStepVertical = (hDocument - hWindow) / (hConOuterScroll - hOuterScroll);\r\n                resTopScroll = Math.round((e.screenY - ____._cursor_Y) * oneStepVertical + ____._topScrollIFrameTemp);\r\n                if(resTopScroll < 0)\r\n                {\r\n                    resTopScroll = 0;\r\n                }\r\n                if(resTopScroll > hDocument - hWindow)\r\n                {\r\n                    resTopScroll = hDocument - hWindow;\r\n                }\r\n    \t\t\t$(iframe.window).scrollTop(resTopScroll);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n            \r\n            if(____._X_Scrollable)\r\n            {\r\n                oneStepGorizontal = (wDocument - wWindow) / (wConOuterScroll - wOuterScroll);\r\n                resLeftScroll = Math.round((e.screenX - ____._cursor_X) * oneStepGorizontal + ____._leftScrollIFrameTemp);\r\n                if(resLeftScroll < 0)\r\n                {\r\n                    resLeftScroll = 0;\r\n                }\r\n                if(resLeftScroll > wDocument - wWindow)\r\n                {\r\n                    resLeftScroll = wDocument - wWindow;\r\n                }\r\n    \t\t\t$(iframe.window).scrollLeft(resLeftScroll);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    //Верхняя стрелочка\r\n    this._handlerArrowTop = function() {\r\n        var iframe = window[____._options.nameIFrame];\r\n        $(this).addClass('active');\r\n        \r\n        var topScroll = $(iframe.window).scrollTop();\r\n\r\n        ____.$fix_animate.css({top: topScroll});\r\n        ____.$fix_animate.stop().animate({top: 0}, //По нормальному чтото она непашет - пришлось через зад делать...\r\n        {\r\n            duration: Math.round(topScroll / ____._options.pixelsScrollableInSeconds * 1000),\r\n            easing: \"linear\",\r\n            complete: function(){\r\n\t\t\t\t$(iframe.window).scrollTop(0);\r\n                $container.trigger(\"csif.scroll\");\r\n            },\r\n            step: function(now,fx){\r\n\t\t\t\t$(iframe.window).scrollTop(now);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n        });\r\n    }\r\n    \r\n    //Нижняя стрелочка\r\n    this._handlerArrowBottom = function() {\r\n        var iframe = window[____._options.nameIFrame];\r\n        $(this).addClass('active');\r\n        var hWindow, hDocument, topScroll;\r\n        \r\n        hWindow = $(iframe.window).height();\r\n        hDocument = $(iframe.document).height();\r\n        topScroll = $(iframe.window).scrollTop();\r\n        \r\n\t\tvar resTopScroll = hDocument - hWindow;\r\n\r\n        ____.$fix_animate.css({top: topScroll});\r\n        ____.$fix_animate.stop().animate({top: resTopScroll},\r\n        {\r\n            duration: Math.round((hDocument - hWindow - topScroll) / ____._options.pixelsScrollableInSeconds * 1000),\r\n            easing: \"linear\",\r\n            complete: function(){\r\n\t\t\t\t$(iframe.window).scrollTop(resTopScroll);\r\n                $container.trigger(\"csif.scroll\");\r\n            },\r\n            step: function(now,fx){\r\n\t\t\t\t$(iframe.window).scrollTop(now);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n        });\r\n    }\r\n    //Левая стрелочка\r\n    this._handlerArrowLeft = function() {\r\n        var iframe = window[____._options.nameIFrame];\r\n        $(this).addClass('active');\r\n        \r\n        var leftScroll = $(iframe.window).scrollLeft();\r\n\r\n        ____.$fix_animate.css({left: leftScroll});\r\n        ____.$fix_animate.stop().animate({left: 0},\r\n        {\r\n            duration: Math.round(leftScroll / ____._options.pixelsScrollableInSeconds * 1000),\r\n            easing: \"linear\",\r\n            complete: function(){\r\n\t\t\t\t$(iframe.window).scrollLeft(0);\r\n                $container.trigger(\"csif.scroll\");\r\n            },\r\n            step: function(now,fx){\r\n\t\t\t\t$(iframe.window).scrollLeft(now);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n        });\r\n    }\r\n\r\n    //Правая стрелочка\r\n    this._handlerArrowRight = function() {\r\n        var iframe = window[____._options.nameIFrame];\r\n        $(this).addClass('active');\r\n        var wWindow, wDocument, leftScroll;\r\n        \r\n        wWindow = $(iframe.window).width();\r\n        wDocument = $(iframe.document).width();\r\n        leftScroll = $(iframe.window).scrollLeft();\r\n        \r\n\t\tvar resLeftScroll = wDocument - wWindow;\r\n\r\n        ____.$fix_animate.css({left: leftScroll});\r\n        ____.$fix_animate.stop().animate({left: resLeftScroll},\r\n        {\r\n            duration: Math.round((wDocument - wWindow - leftScroll) / ____._options.pixelsScrollableInSeconds * 1000),\r\n            easing: \"linear\",\r\n            complete: function(){\r\n\t\t\t\t$(iframe.window).scrollLeft(resLeftScroll);\r\n                $container.trigger(\"csif.scroll\");\r\n            },\r\n            step: function(now,fx){\r\n\t\t\t\t$(iframe.window).scrollLeft(now);\r\n                $container.trigger(\"csif.scroll\");\r\n            }\r\n        });\r\n    }\r\n    \r\n    //Убрать мышку со стрелочки\r\n    this._handlerArrowLeave = function() {\r\n        ____.$fix_animate.stop();\r\n        $(this).removeClass('active');\r\n    }\r\n    \r\n    //Прокрутка колесом мыши\r\n    this._mouseWheelAnimated = false;\r\n    this._tempWheelAnimated = 0;\r\n    this._handlerMouseWheel = function(e) {\r\n        if(window[____._options.nameIFrame] !== undefined) {\r\n            var deltaY;\r\n            if(\"mozMovementY\" in e.originalEvent) {\r\n                deltaY = e.originalEvent.deltaY || -1 * e.originalEvent.wheelDelta;\r\n                deltaY *= 40;\r\n            } else if( /rv\\:11/.test(navigator.userAgent) ) {\r\n                if( (e.originalEvent.deltaY || -1 * e.originalEvent.wheelDelta) > 0 ) {\r\n                    deltaY = 120;\r\n                } else {\r\n                    deltaY = -120;\r\n                }\r\n            } else if( /Firefox\\//.test(navigator.userAgent) ) {\r\n                deltaY = e.originalEvent.deltaY || -1 * e.originalEvent.wheelDelta;\r\n                deltaY *= 40;\r\n            } else {\r\n                deltaY = e.originalEvent.deltaY || -1 * e.originalEvent.wheelDelta;\r\n                if(Math.abs(deltaY) < 50) {\r\n                    deltaY *= 120;\r\n                }\r\n            }\r\n\r\n            var iframe = window[____._options.nameIFrame];\r\n\r\n            topScroll = $(iframe.window).scrollTop();\r\n            if( ____._mouseWheelAnimated ) {\r\n                //Если пользователь резко начал крутить в другую сторону\r\n                if(sign(____._tempWheelAnimated - topScroll) !== sign(deltaY)) {//IE НЕПОТДЕРЖИВАЕТ \"Math.sign\"\r\n                    ____._tempWheelAnimated = topScroll + deltaY;\r\n                } else {\r\n                    ____._tempWheelAnimated += deltaY;\r\n                }\r\n            } else {\r\n                ____._tempWheelAnimated = topScroll + deltaY;\r\n            }\r\n            function sign(number) {\r\n                if( number > 0 ) {\r\n                    return 1;\r\n                } else if( number === 0 ) {\r\n                    return 0;\r\n                } else {\r\n                    return -1;\r\n                }\r\n            }\r\n\r\n            ____._mouseWheelAnimated = true;\r\n\r\n            ____.$fix_animate.css({top: topScroll});\r\n            ____.$fix_animate.stop().animate({top: ____._tempWheelAnimated},\r\n                {\r\n                    duration: 100,\r\n                    easing: \"linear\",\r\n                    complete: function(){\r\n                        $(iframe.window).scrollTop(____._tempWheelAnimated);\r\n                        ____._mouseWheelAnimated = false;\r\n\r\n                        $container.trigger(\"csif.scroll\");\r\n                    },\r\n                    step: function(now,fx){\r\n                        $(iframe.window).scrollTop(now);\r\n\r\n                        $container.trigger(\"csif.scroll\");\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nmodules.customScrollIFrame = customScrollIFrame;\r\n    \r\n})(jQuery);"]}