!function(e){var o=function(o,n){this._options=n;var r=this;r._last_cursor_Y=0,r._last_cursor_X=0,this._create=function(){var n=e("#"+r._options.nameIFrame).contents();o.append('<div class="mnif-show-space panel panel-primary"><div class="mnif-draggable panel-body"></div></div>'),r._draggable=!1,r._cursor_Y=0,r._cursor_X=0,r._draggableTopTemp=0,r._draggableLeftTemp=0,n.find("body").on("mousemove",r._handlerMove),e("body").on("mousemove",r._handlerMove),e("body").on("keydown",r._handlerDown),n.find("body").on("keydown",r._handlerDown),e("body").on("keyup",r._handlerUp),n.find("body").on("keyup",r._handlerUp)},this._destroy=function(){o.find(" .mnif-show-space").remove();var n=e("#"+r._options.nameIFrame).contents();n.find("body").off("mousemove",r._handlerMove),e("body").off("mousemove",r._handlerMove),e("body").off("keydown",r._handlerDown),n.find("body").off("keydown",r._handlerDown),e("body").off("keyup",r._handlerUp),n.find("body").off("keyup",r._handlerUp)},this.reload=function(){r._destroy(),r._create()},this._handlerDown=function(e){if(69==e.which&&e.ctrlKey&&!e.shiftKey&&!e.altKey){if(!r._draggable){var n=o.find(" .mnif-show-space");n.attr("style","").css({display:"block"});var a=n.outerWidth(),t=n.outerHeight(),i=o.find(".pmv-outer-wrap").width(),s=o.find(".pmv-outer-wrap").height();n.css({width:Math.round(a),height:Math.round(t),top:Math.round((s-t)/2),left:Math.round((i-a)/2)}),r._draggable=!0,r._cursor_X=!1,r._cursor_Y=!1,r._draggableTopTemp=o.find(".pmv-fitting-wrap").position().top,r._draggableLeftTemp=o.find(".pmv-fitting-wrap").position().left,r.updateDraggable()}return e.preventDefault?e.preventDefault():e.stop(),e.returnValue=!1,e.stopPropagation(),!1}},this._handlerUp=function(e){if(r._draggable){var n=o.find(" .mnif-show-space");n.css({display:"none"}),r._draggable=!1}},this.updateDraggable=function(){var n,a,t,i,s,d,p,_,h,l,f,g,u=e("#"+r._options.nameIFrame),c=u.closest(".pmv-fitting-wrap"),m=u.closest(".pmv-outer-wrap"),b=o.find(" .mnif-show-space");n=c.width(),a=c.height(),i=c.position().top,s=c.position().left,t=m.width(),d=m.height(),f=b.width(),g=b.height(),_=d/a*g,_<r._options.minHDraggable&&(_=r._options.minHDraggable),_>g&&(_=g),h=i/-(a-d)*(g-_),p=t/n*f,p<r._options.minWDraggable&&(p=r._options.minWDraggable),p>f&&(p=f),l=s/-(n-t)*(f-p),b.find(".mnif-draggable").css({width:Math.round(p),height:Math.round(_),top:Math.round(h),left:Math.round(l)})},this._handlerMove=function(n){if(r._last_cursor_X=n.screenX,r._last_cursor_Y=n.screenY,r._draggable){r._cursor_Y===!1&&(r._cursor_X=r._last_cursor_X,r._cursor_Y=r._last_cursor_Y);var a,t,i,s,d,p,_,h,l,f,g,u,c,m,b=e("#"+r._options.nameIFrame),v=b.closest(".pmv-fitting-wrap"),w=b.closest(".pmv-outer-wrap"),y=o.find(" .mnif-show-space");a=v.width(),t=v.height(),d=v.position().top,p=v.position().left,i=w.width(),s=w.height(),l=y.width(),f=y.height(),h=s/t*f,h<r._options.minHDraggable&&(h=r._options.minHDraggable),_=i/a*l,_<r._options.minWDraggable&&(_=r._options.minWDraggable),g=-(t-s)/(f-h),u=-(a-i)/(l-_),t>s&&(c=(n.screenY-r._cursor_Y)*g+r._draggableTopTemp,c>0&&(c=0,r._options.responsiveToMovementOfTheCursorInAConfinedSpace||(r._cursor_Y=n.screenY,r._draggableTopTemp=d)),c<-(t-s)&&(c=-(t-s),r._options.responsiveToMovementOfTheCursorInAConfinedSpace||(r._cursor_Y=n.screenY,r._draggableTopTemp=d)),v.css({top:Math.round(c)})),a>i&&(m=(n.screenX-r._cursor_X)*u+r._draggableLeftTemp,m>0&&(m=0,r._options.responsiveToMovementOfTheCursorInAConfinedSpace||(r._cursor_X=n.screenX,r._draggableLeftTemp=p)),m<-(a-i)&&(m=-(a-i),r._options.responsiveToMovementOfTheCursorInAConfinedSpace||(r._cursor_X=n.screenX,r._draggableLeftTemp=p)),v.css({left:Math.round(m)})),r.updateDraggable()}}};modules.mapNavigatorIFrame=o}(jQuery);
//# sourceMappingURL=map-navigator-iframe.js.map
