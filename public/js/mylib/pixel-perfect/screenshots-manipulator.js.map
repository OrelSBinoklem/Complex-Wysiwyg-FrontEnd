{"version":3,"sources":["js/mylib/pixel-perfect/screenshots-manipulator.js"],"names":["$","screenshotsManipulator","$container","options","this","_options","____","_create","href","append","find","mCustomScrollbar","axis","theme","scrollbarPosition","scrollInertia","mouseWheel","scrollAmount","thumbnailScrollAmount","on","handlerClickBeyondLimits","handlerOpenDeviation","handlerClickMedia","handlerClickScrin","handlerChangeStaticOrFixed","handlerChangeRelativePosition","_handlerShowThumbnail","_handlerHideThumbnail","_destroy","remove","e","preventDefault","css","display","handlerCloseDeviation","target","closest","size","removeClass","$currentSMMedia","addClass","trigger","parseInt","attr","toggleClass","$deviation","prop","val","leftPos","first","hasClass","fastShow","$session","text","show","openSMTimeLine__close","pause","opacity","transform","openSMTimeLine","restart","TimelineLite","TweenMax","to","hide","handlerComplete","onComplete","toggle","src","shablonizator","base_url","dirThumbnail","$thumbnail","stop","fadeIn","width","widthThumbnail","top","offset","fadeOut","refresh","$listAllScrins","currentPage","removeListScrins","createListScrins","result","$page","each","arrDeviation","split","lastIndex","length","position","left","l_px","l_per","t_px","t_per","$scrin","wScrin","hScrin","createDeviation","refreshUiSortableAndSpinner","empty","sortable","revert","update","event","ui","cursor","items","distance","placeholder","element","currentItem","height","outerHeight","container","p","connectWith","item","$clone","clone","insertAfter","prepend","refreshSpinner","currentMediaActive","spinner","min","max","start","spin","_restoreSession","_setSession","$relative","modules","jQuery"],"mappings":"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","file":"screenshots-manipulator.js","sourcesContent":["(function($){//Модули: getfile, setfile, .xml(), customScrollIFrame\r\n\r\nvar defaultOptions = {\r\n    dirThumbnail: \"sb/miniatyrki\",\r\n    widthThumbnail: 240,\r\n    thumbnailScrollAmount: 100,\r\n    mainWindowScrollAmount: 100\r\n};\r\n\r\nvar screenshotsManipulator = function($container, options) {\r\n    this._options = options;\r\n    var ____ = this;\r\n    ____.$container = $container;\r\n    //this._options.$container = $container;//заменяло контенер пиксель перфект\r\n    \r\n    this._create = function( href )\r\n    {\r\n        //HTML\r\n        $container.append('<div class=\"sm-container-scroll-wrap\"><ul class=\"sm-container\"></ul></div>');\r\n        $container.append('<div class=\"sm-thumbnail\"><div class=\"sm-thumbnail-img-container\"></div></div>');\r\n        $container.find( \" .sm-container-scroll-wrap\" ).mCustomScrollbar({\r\n            axis: \"y\",\r\n            theme: \"dark\",\r\n            scrollbarPosition: \"outside\",\r\n            scrollInertia: 100,\r\n            mouseWheel: {\r\n                scrollAmount: ____._options.thumbnailScrollAmount\r\n            }\r\n        });\r\n        $container.find( \" .sm-thumbnail\" ).mCustomScrollbar({\r\n            axis: \"y\",\r\n            theme: \"dark\",\r\n            scrollbarPosition: \"outside\",\r\n            scrollInertia: 100,\r\n            mouseWheel: {\r\n                scrollAmount: ____._options.thumbnailScrollAmount\r\n            }\r\n        });\r\n        \r\n        //Установка обработчиков событий\r\n        $( \"body\" ).on(\"click click.body.iframe\", ____.handlerClickBeyondLimits);\r\n        \r\n        $container.on(\"click\", \" .btn-deviation\", ____.handlerOpenDeviation);\r\n        \r\n        $container.on(\"click\", \" .sm-media .h-group\", ____.handlerClickMedia);\r\n        $container.on(\"click\", \" .sm-media .sm-scrin\", ____.handlerClickScrin);\r\n        \r\n        $container.on(\"click\", \" .sm-deviation-fixed-or-static .btn\", ____.handlerChangeStaticOrFixed);\r\n        $container.on(\"click\", \" .sm-deviation-relative .btn\", ____.handlerChangeRelativePosition);\r\n        \r\n        $container.on( \"mouseenter\", \" .sm-scrin\", ____._handlerShowThumbnail);\r\n        $container.on( \"mouseleave\", ____._handlerHideThumbnail);\r\n    }\r\n    \r\n    this._destroy = function()\r\n    {\r\n        $container.find( \" .sm-container-scroll-wrap\" ).remove();\r\n    }\r\n    \r\n    //Открытие окна для изменения положения скрина\r\n    this.handlerOpenDeviation = function(e){\r\n        e.preventDefault();\r\n        \r\n        if( $(this).find( \" ~ .sm-deviation\" ).css( \"display\" ) == \"none\" ) {\r\n            $container.find( \" .sm-deviation\" ).css({display: \"none\"});\r\n            $(this).find( \" ~ .sm-deviation\" ).css({display: \"block\"});\r\n        } else {\r\n            $container.find( \" .sm-deviation\" ).css({display: \"none\"});\r\n        }\r\n    }\r\n    \r\n    //Закрытие окна для изменения положения скрина\r\n    this.handlerCloseDeviation = function(e){\r\n        if( $(e.target).closest(\".btn-deviation, .sm-deviation\").size() == 0 ) {\r\n            $container.find( \" .sm-deviation\" ).css({display: \"none\"});\r\n        }\r\n    }\r\n    \r\n    //Выбор разрешения\r\n    this.handlerClickMedia = function(e){\r\n        $container.find( \" .sm-media\" ).removeClass( \"active\" );\r\n        var $currentSMMedia = $(this).closest( \".sm-media\" );\r\n        $currentSMMedia.addClass( \"active\" );\r\n        $container.trigger(\"sm.change\");//и это тоже должно сработать после вызова \"sm.change.size\"//НЕСРАБОТАЛО\r\n        $container.trigger(\"sm.change.size\", [parseInt($currentSMMedia.attr(\"data-width\")), parseInt($currentSMMedia.attr(\"data-height\"))]);\r\n    }\r\n    \r\n    //Выбор скрина\r\n    this.handlerClickScrin = function(e){\r\n        if( !$(e.target).closest(\".btn-deviation, .sm-deviation\").size() ) {\r\n            $(this).toggleClass( \"active\" );  \r\n            $container.trigger(\"sm.change\");\r\n        }\r\n    }\r\n    \r\n    //Изменение позиционирования скрина fixed или static\r\n    this.handlerChangeStaticOrFixed = function(){\r\n        var $deviation = $(this).closest( \".sm-deviation\" );\r\n        \r\n        //fix\r\n        $(this).closest( \".sm-deviation-fixed-or-static\" ).find( \"input\" ).prop(\"checked\", false);\r\n        $(this).find( \" input\" ).prop(\"checked\", \"checked\");\r\n        \r\n        if($(this).find( \" input\" ).val() == 1)\r\n        //static\r\n        {   \r\n            var leftPos = $deviation.find(' .sm-deviation-relative .btn.active').first().attr( \"data-left\" );\r\n            \r\n            $deviation.find(' .sm-deviation-relative .btn-group:nth-child(2) .btn').addClass('disabled');\r\n            $deviation.find(' .sm-deviation-relative .btn-group:nth-child(3) .btn').addClass('disabled');\r\n            \r\n            $deviation.find(' .sm-deviation-relative .btn').removeClass('active btn-danger').addClass( \"btn-default\" );\r\n            $deviation.find(' .sm-deviation-relative .btn-group:nth-child(1) .btn[data-left=\"'+ leftPos +'\"]').removeClass('btn-default').addClass('active btn-danger');\r\n            \r\n            $deviation.find(' .sm-deviation-relative')\r\n                .removeClass('sm-deviation-fixed')\r\n                .addClass('sm-deviation-static');\r\n        }\r\n        //fixed\r\n        else {\r\n            $deviation.find(' .sm-deviation-relative .btn').removeClass('disabled');\r\n            \r\n            $deviation.find(' .sm-deviation-relative')\r\n                .removeClass('sm-deviation-static')\r\n                .addClass('sm-deviation-fixed');\r\n        }\r\n        \r\n        $container.trigger(\"sm.change\");\r\n    }\r\n    \r\n    //Изменение точки крепления скрина к экрану\r\n    this.handlerChangeRelativePosition = function(){\r\n        if( !$(this).hasClass( \"disabled\" ) ) {\r\n            $(this).closest( \".sm-deviation\" ).find(' .sm-deviation-relative .btn').removeClass('active btn-danger').addClass( \"btn-default\" );\r\n            $(this).removeClass('btn-default').addClass( \"active btn-danger\" );\r\n            \r\n            $container.trigger(\"sm.change\");\r\n        }\r\n    }\r\n    \r\n    this.handlerClickBeyondLimits = function(e){\r\n        ____.handlerCloseDeviation(e);\r\n    }\r\n    \r\n    this.fastShow = function( $session ) {\r\n        $container.find( \" .sm-container-scroll-wrap\" ).css({display: \"block\"});\r\n        \r\n        $session.find( \"screenshots_manipulator\" ).text( \"show\" );\r\n        \r\n        $container.trigger(\"sm.show\");\r\n    }\r\n    \r\n    this.show = function( $session ) {\r\n        if( \"openSMTimeLine__close\" in ____ ) { ____.openSMTimeLine__close.pause() }\r\n        $container.find( \" .sm-container-scroll-wrap\" ).css({\r\n            display: \"block\",\r\n            opacity: 0,\r\n            transform: \"scale(0.8, 0.8)\"\r\n        });\r\n        \r\n        if( !(\"openSMTimeLine\" in ____) ) {\r\n            ____.openSMTimeLine = (new TimelineLite()).append([\r\n                TweenMax.to($container.find( \" .sm-container-scroll-wrap\" ), 0.5,\r\n                    {css:{transform: \"scale(1, 1)\" }}),\r\n                TweenMax.to($container.find( \" .sm-container-scroll-wrap\" ), 0.3,\r\n                    {css:{ opacity: 1 }})\r\n            ]);\r\n        } else {\r\n            ____.openSMTimeLine.restart();\r\n        }\r\n        \r\n        $session.find( \"screenshots_manipulator\" ).text( \"show\" );\r\n        \r\n        $container.trigger(\"sm.show\");\r\n    }\r\n    \r\n    this.hide = function( $session ) {\r\n        ____._handlerHideThumbnail();\r\n        \r\n        if( \"openSMTimeLine\" in ____ ) { ____.openSMTimeLine.pause() }\r\n        if( !(\"openSMTimeLine__close\" in ____) ) {\r\n            ____.openSMTimeLine__close = (new TimelineLite()).append([\r\n                TweenMax.to($container.find( \" .sm-container-scroll-wrap\" ), 0.5,\r\n                    {css:{ transform: \"scale(0.8, 0.8)\"}, onComplete: handlerComplete}),\r\n                TweenMax.to($container.find( \" .sm-container-scroll-wrap\" ), 0.5,\r\n                    {css:{ opacity: 0 }})\r\n            ]);\r\n        } else {\r\n            ____.openSMTimeLine__close.restart();\r\n        }\r\n        function handlerComplete() {\r\n            $container.find( \" .sm-container-scroll-wrap\" ).css('display', 'none');\r\n        }\r\n        \r\n        $session.find( \"screenshots_manipulator\" ).text( \"hidden\" );\r\n        \r\n        $container.trigger(\"sm.hide\");\r\n    }\r\n    \r\n    this.toggle = function( $session ) {\r\n        if( $session.find( \"screenshots_manipulator\" ).text() == \"show\" ) {\r\n            ____.hide( $session );\r\n        } else if( $session.find( \"screenshots_manipulator\" ).text() == \"hidden\" ) {\r\n            ____.show( $session );\r\n        }\r\n    }\r\n    \r\n    this._handlerShowThumbnail = function() {\r\n        src = shablonizator.base_url + ____._options.dirThumbnail + \"/\" + $(this).attr( \"data-src\" );\r\n        $container.find( \" .sm-thumbnail img\" ).remove();\r\n        \r\n        $container.find( \" .sm-thumbnail-img-container\" )\r\n            .append( '<img src=\"'+ src +'\" alt=\"\" />' )\r\n        var $thumbnail = $container.find( \" .sm-thumbnail\" );\r\n        $thumbnail\r\n            .stop()\r\n            .fadeIn()\r\n            .css({width: ____._options.widthThumbnail, top: parseInt($thumbnail.css(\"top\")) - ($thumbnail.offset().top)});\r\n    }\r\n    \r\n    this._handlerHideThumbnail = function() {\r\n        $container.find( \" .sm-thumbnail\" )\r\n            .stop()\r\n            .fadeOut(400, function(){\r\n                $container.find( \" .sm-thumbnail img\" ).remove();\r\n            });\r\n    }\r\n    \r\n    this.refresh = function( $session, $listAllScrins, currentPage ) {\r\n        ____.removeListScrins();\r\n        ____.createListScrins( $session, $listAllScrins, currentPage );\r\n    }\r\n    \r\n    this.createListScrins = function( $session, $listAllScrins, currentPage ) {\r\n        var result = \"\";\r\n        \r\n        var $page = $session.find( \" page[href='\" + currentPage + \"']\" );\r\n        $page.find( \" media\" ).each(function(){\r\n            result += '<li class=\"sm-media'+( ( $(this).attr( \"active\" ) == \"true\" ) ? \" active\" : \"\" )+' clearfix\" data-width=\"'+( $(this).attr( \"width\" ) )+'\" data-height=\"'+( $(this).attr( \"height\" ) )+'\">';\r\n            result += '<h4 class=\"h-group\"><span class=\"sm-w-h\">'+( $(this).attr( \"width\" ) )+'x'+( $(this).attr( \"height\" ) )+'</span></h4>';\r\n            \r\n            $(this).find( \" scrin\" ).each(function(){\r\n                var arrDeviation = $(this).attr( \"deviation\" ).split(\"|\");\r\n                var lastIndex = arrDeviation.length - 1;\r\n                \r\n                var position = arrDeviation[0];\r\n                var left = arrDeviation[1];\r\n                var top = ( position == \"static\" ) ? \"top\" : arrDeviation[2];\r\n                var l_px =  parseInt( arrDeviation[lastIndex-3] );\r\n                var l_per = parseInt( arrDeviation[lastIndex-2] );\r\n                var t_px =  parseInt( arrDeviation[lastIndex-1] );\r\n                var t_per = parseInt( arrDeviation[lastIndex] );\r\n                \r\n                var $scrin = $listAllScrins.find( \" scrin[src='\"+( $(this).attr( \"src\" ) )+\"']\" );\r\n                var wScrin = $scrin.attr( \"width\" );\r\n                var hScrin = $scrin.attr( \"height\" );\r\n                \r\n                //Список разрешений со скринами\r\n                result += '\\\r\n                <div class=\"sm-scrin'+( ( $(this).attr( \"active\" ) == \"true\" ) ? \" active\" : \"\" )+' panel panel-primary\" data-src=\"'+ $(this).attr( \"src\" ) +'\">\\\r\n                    <div class=\"panel-body\">\\\r\n                        <strong class=\"sm-name-scrin\">'+ $(this).attr( \"src\" ) +'</strong>\\\r\n                        <div class=\"floatr-fix\">\\\r\n                            '+ ____.createDeviation( position, left, top, l_px, l_per, t_px, t_per ) +'\\\r\n                            <span class=\"sm-w-h-scrin text-right\"><kbd>'+ wScrin +'</kbd> x <kbd>'+ hScrin +'</kbd></span>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                </div>';\r\n            });\r\n            result += '</li>';\r\n        });\r\n        \r\n        //Список всех скринов\r\n        result += '<li class=\"sm-all-scrins\"><h4 class=\"h-group\">Все скрины:</h4>';\r\n        $listAllScrins.find( \" scrin\" ).each(function(){\r\n            result += '\\\r\n            <div class=\"sm-scrin panel panel-default\" data-src=\"'+ $(this).attr( \"src\" ) +'\">\\\r\n                <div class=\"panel-body\">\\\r\n                    <strong class=\"sm-name-scrin\">'+ $(this).attr( \"src\" ) +'</strong>\\\r\n                    <div class=\"floatr-fix\">\\\r\n                        <span class=\"sm-w-h-scrin\"><kbd>'+ $(this).attr( \"width\" ) +'</kbd> x <kbd>'+ $(this).attr( \"height\" ) +'</kbd></span>\\\r\n                    </div>\\\r\n                </div>\\\r\n            </div>';\r\n        });\r\n        result += '</li>';\r\n        \r\n        $container.find( \" .sm-container\" ).append( result );\r\n        \r\n        ____.refreshUiSortableAndSpinner();\r\n    }\r\n        //Создать окно отклонения\r\n        this.createDeviation = function( position, left, top, l_px, l_per, t_px, t_per ) {\r\n            var result = \"\";\r\n            \r\n            result += '\\\r\n            <div class=\"btn-deviation btn btn-default btn-xs\"><span class=\"glyphicon glyphicon-move\"></span></div>\\\r\n            <div class=\"sm-deviation panel panel-primary\">\\\r\n                <div class=\"panel-body\">\\\r\n                    <div class=\"row\">\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-left\">\\\r\n                            <form class=\"sm-deviation-fixed-or-static btn-group-vertical btn-toggle-one-color\" data-toggle=\"buttons\">\\\r\n            \t\t\t\t\t<label class=\"btn btn-'+( ( position == \"static\" ) ? \"primary active\" : \"default\" )+'\" data-btn-color=\"primary\">\\\r\n            \t\t\t\t\t\t<input type=\"radio\" name=\"sm-radio-fixed-or-static\"'+( ( position == \"static\" ) ? \" checked\" : \"\" )+' value=\"1\" />Static\\\r\n            \t\t\t\t\t</label>\\\r\n            \t\t\t\t\t<label class=\"btn btn-'+( ( position == \"fixed\" ) ? \"danger active\" : \"default\" )+'\" data-btn-color=\"danger\">\\\r\n            \t\t\t\t\t\t<input type=\"radio\" name=\"sm-radio-fixed-or-static\"'+( ( position == \"fixed\" ) ? \" checked\" : \"\" )+' value=\"0\" />Fixed\\\r\n            \t\t\t\t\t</label>\\\r\n            \t\t\t\t</form>\\\r\n                        </div>\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-right\">\\\r\n                            <div class=\"sm-deviation-relative sm-deviation-'+ position +' btn-group-table\">\\\r\n                                <div class=\"btn-group btn-group-justified\" role=\"group\">\\\r\n                                    <div class=\"'+( ( left == \"left\"   && top == \"top\" )    ? \" active btn-danger\" : \" btn-default\" )+' btn\" data-left=\"left\" data-top=\"top\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"center\" && top == \"top\" )    ? \" active btn-danger\" : \" btn-default\" )+' btn\" data-left=\"center\" data-top=\"top\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"right\"  && top == \"top\" )    ? \" active btn-danger\" : \" btn-default\" )+' btn\" data-left=\"right\" data-top=\"top\" role=\"button\">&nbsp</div>\\\r\n                                </div>\\\r\n                                <div class=\"btn-group btn-group-justified\" role=\"group\">\\\r\n                                    <div class=\"'+( ( left == \"left\"   && top == \"center\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"left\" data-top=\"center\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"center\" && top == \"center\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"center\" data-top=\"center\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"right\"  && top == \"center\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"right\" data-top=\"center\" role=\"button\">&nbsp</div>\\\r\n                                </div>\\\r\n                                <div class=\"btn-group btn-group-justified\" role=\"group\">\\\r\n                                    <div class=\"'+( ( left == \"left\"   && top == \"bottom\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"left\" data-top=\"bottom\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"center\" && top == \"bottom\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"center\" data-top=\"bottom\" role=\"button\">&nbsp</div>\\\r\n                                    <div class=\"'+( ( left == \"right\"  && top == \"bottom\" ) ? \" active btn-danger\" : \" btn-default\" )+' btn'+( ( position == \"static\" ) ? \" disabled\" : \"\" )+'\" data-left=\"right\" data-top=\"bottom\" role=\"button\">&nbsp</div>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                    <div class=\"row row-name-px-percent\">\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-left\">\\\r\n                            <p>px</p>\\\r\n                        </div>\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-right\">\\\r\n                            <p>%</p>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                    <div class=\"row row-otklonenie-1\">\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-left\">\\\r\n                            <div class=\"input-group\">\\\r\n                                <input type=\"text\" class=\"form-control input-sm sm-deviation-input sm-deviation-left-px\" value=\"'+ l_px +'\">\\\r\n                                <div class=\"input-group-addon\"><span class=\"fa fa-long-arrow-right\"></span></div>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-right\">\\\r\n                            <div class=\"input-group\">\\\r\n                                <input type=\"text\" class=\"form-control input-sm sm-deviation-input sm-deviation-left-percent\" value=\"'+ l_per +'\">\\\r\n                                <div class=\"input-group-addon\"><span class=\"fa fa-long-arrow-right\"></span></div>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                    <div class=\"row row-otklonenie-2\">\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-left\">\\\r\n                            <div class=\"input-group\">\\\r\n                                <input type=\"text\" class=\"form-control input-sm sm-deviation-input sm-deviation-top-px\" value=\"'+ t_px +'\">\\\r\n                                <div class=\"input-group-addon\">&nbsp<span class=\"fa fa-long-arrow-down\"></span>&nbsp</div>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                        <div class=\"col-xs-6 sm-deviation-col-right\">\\\r\n                            <div class=\"input-group\">\\\r\n                                <input type=\"text\" class=\"form-control input-sm sm-deviation-input sm-deviation-top-percent\" value=\"'+ t_per +'\">\\\r\n                                <div class=\"input-group-addon\">&nbsp<span class=\"fa fa-long-arrow-down\"></span>&nbsp</div>\\\r\n                            </div>\\\r\n                        </div>\\\r\n                    </div>\\\r\n                </div>\\\r\n            </div>';\r\n            \r\n            return result;\r\n        }\r\n    \r\n    this.removeListScrins = function() {\r\n        $container.find( \" .sm-container\" ).empty();\r\n    }\r\n    \r\n    this.refreshUiSortableAndSpinner = function() {\r\n        $container.find( \" .sm-container\" ).sortable({\r\n            revert: true,\r\n            update: function(event, ui){\r\n                \r\n            },\r\n            cursor: 'move',\r\n            axis: 'y',\r\n            items: ' > .sm-media',\r\n            distance: 5,\r\n            placeholder: {\r\n                element: function(currentItem) {\r\n                    return $('<div class=\"sm-placeholder-media\"></div>').height( currentItem.outerHeight() );\r\n                },\r\n                update: function(container, p) {\r\n                    return;\r\n                }\r\n            },\r\n            stop: function(){\r\n                $container.trigger(\"sm.change\");\r\n            }\r\n        });\r\n        \r\n        $container.find( \" .sm-container .sm-media\" ).sortable({\r\n            revert: true,\r\n            cursor: 'move',\r\n            axis: 'y',\r\n            items: ' > .sm-scrin',\r\n            distance: 5,\r\n            connectWith: \" .sm-container .sm-media, .sm-container .sm-all-scrins\",\r\n            placeholder: {\r\n                element: function(currentItem) {\r\n                    return $('<div class=\"panel panel-default sm-placeholder-scrin\"></div>').height( currentItem.outerHeight() );\r\n                },\r\n                update: function(container, p) {\r\n                    return;\r\n                }\r\n            },\r\n            remove: function(event, ui){//\"update\" заменил на \"remove\"\r\n                if( ui.item.closest( \".sm-all-scrins\" ).size() ) {\r\n                    ui.item.remove();\r\n                }\r\n            },\r\n            stop: function(){\r\n                $container.trigger(\"sm.change\");\r\n            }\r\n        });\r\n        \r\n        $container.find( \" .sm-container .sm-all-scrins\" ).sortable({\r\n            revert: true,\r\n            cursor: 'move',\r\n            axis: 'y',\r\n            items: ' > .sm-scrin',\r\n            distance: 5,\r\n            connectWith: \" .sm-container .sm-media\",\r\n            placeholder: {\r\n                element: function(currentItem) {\r\n                    return $('<div class=\"panel panel-default sm-placeholder-scrin\"></div>').height( currentItem.outerHeight() );\r\n                },\r\n                update: function(container, p) {\r\n                    return;\r\n                }\r\n            },\r\n            remove: function(event, ui){//\"update\" заменил на \"remove\"\r\n                var $clone = ui.item.clone();\r\n                $clone.insertAfter(ui.item);\r\n                \r\n                $clone.find( \" .floatr-fix\" ).prepend( ____.createDeviation( \"static\", \"center\", \"top\", 0, 0, 0, 0 ) );\r\n                ____.refreshSpinner();\r\n                $(this).sortable('cancel');\r\n            },\r\n            stop: function(){\r\n                $container.trigger(\"sm.change\");\r\n            }\r\n        });\r\n        \r\n        ____.refreshSpinner();\r\n        \r\n        \r\n    }\r\n        //Обновить спиннер\r\n        this.refreshSpinner = function() {\r\n            var currentMediaActive = false;\r\n            \r\n            $container.find( \" .sm-deviation-input\" ).spinner({\r\n                min: -99999,\r\n                max: 99999,\r\n                start: function(){\r\n                    currentMediaActive = $(this).closest( \".sm-media\" ).hasClass( \"active\" );\r\n                    \r\n                    if( currentMediaActive ) {\r\n                        $container.trigger(\"sm.changeoffsetstart\", [$(this)]);\r\n                    }\r\n                },\r\n                spin: function(){\r\n                    if( currentMediaActive ) {\r\n                        $container.trigger(\"sm.changeoffset\");\r\n                    }\r\n                },\r\n                stop: function(){\r\n                    $container.trigger(\"sm.change\");\r\n                }\r\n            });\r\n        }\r\n        \r\n    this._restoreSession = function( $session ) {\r\n        if( $session.find( \"screenshots_manipulator\" ).text() == \"show\" ) {\r\n            ____.fastShow( $session );\r\n        } else if( $session.find( \"screenshots_manipulator\" ).text() == \"hidden\" ) {\r\n            ____.hide( $session );\r\n        }\r\n    }\r\n    \r\n    this._setSession = function( $session, $listAllScrins, currentPage ) {\r\n        var $page = $session.find( \" page[href='\" + currentPage + \"']\" );\r\n        \r\n        if( $page.size() == 0 ) {\r\n            $session.find( \" wrap\" ).append( '<page href=\"' + currentPage + '\"></page>' );\r\n            $page = $session.find( \" page[href='\" + currentPage + \"']\" );\r\n        } else {\r\n            $page.empty();\r\n        }\r\n        \r\n        //console.time('_setSession');\r\n        var result = \"\";\r\n        $container.find( \" .sm-container .sm-media\" ).each(function(){\r\n            result += '<media width=\"'+ $(this).attr( \"data-width\" ) +'\" height=\"'+ $(this).attr( \"data-height\" ) +'\" active=\"'+ $(this).hasClass( \"active\" ) +'\">';\r\n            $(this).find( \" .sm-scrin\" ).each(function(){\r\n                var position = ( $(this).find(' .sm-deviation-fixed-or-static input:checked').val() == 1 ) ? \"static\" : \"fixed\";\r\n                var $relative = $(this).find(' .sm-deviation-relative .btn.active');\r\n                var left = $relative.attr( \"data-left\" );\r\n                var top = $relative.attr( \"data-top\" );\r\n                var l_px =  $(this).find(' .sm-deviation-left-px').val();\r\n                var l_per = $(this).find(' .sm-deviation-left-percent').val();\r\n                var t_px =  $(this).find(' .sm-deviation-top-px').val();\r\n                var t_per = $(this).find(' .sm-deviation-top-percent').val();\r\n                \r\n                result += '<scrin src=\"'+ $(this).attr( \"data-src\" ) +'\" active=\"'+ $(this).hasClass( \"active\" ) +'\" deviation=\"'+ position +'|'+ left +'|'+ top +'|'+ l_px +'|'+ l_per +'|'+ t_px +'|'+ t_per +'\"></scrin>';\r\n            });\r\n            result += '</media>';\r\n        });\r\n        \r\n        $page.append( $( result ) );\r\n        //console.timeEnd('_setSession');\r\n    }\r\n}\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n\r\n    modules.screenshotsManipulator = screenshotsManipulator;\r\n    \r\n})(jQuery);"]}