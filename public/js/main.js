var crossModulesFunctions={};jQuery(function(e){function s(){!function(){function s(){"openOptionsTimeLine__close"in t&&t.openOptionsTimeLine__close.pause(),e(" .shab__global-settings").css({display:"block",opacity:0,transform:"scale(0.8, 0.8)"}),"openOptionsTimeLine"in t?t.openOptionsTimeLine.restart():t.openOptionsTimeLine=(new TimelineLite).append([TweenMax.to(e(".shab__global-settings"),.5,{css:{transform:"scale(1, 1)"}}),TweenMax.to(e(".shab__global-settings"),.3,{css:{opacity:1}})]),e(".shab__global-settings-btn").addClass("active")}function a(){function s(){e(".shab__global-settings").css("display","none")}"openOptionsTimeLine"in t&&t.openOptionsTimeLine.pause(),"openOptionsTimeLine__close"in t?t.openOptionsTimeLine__close.restart():t.openOptionsTimeLine__close=(new TimelineLite).append([TweenMax.to(e(".shab__global-settings"),.5,{css:{transform:"scale(0.8, 0.8)"},onComplete:s}),TweenMax.to(e(".shab__global-settings"),.5,{css:{opacity:0}})]),e(".shab__global-settings-btn").removeClass("active")}var t={};e(".shab__global-settings-btn").on("click",function(){e(this).hasClass("active")?a():s()}),e("body").on("click click.body.iframe",function(s){0==e(s.target).closest(e(".shab__global-settings-btn").add(e(".shab__global-settings"))).size()&&e(".shab__global-settings-btn").hasClass("active")&&a()})}(),function(){function s(){if(a.data.sessionGroupSynchronizations.length){var s,t=void 0!==e.cookie("adaptive_pixel_perfect_groups_session");if(t){s=e.secureEvalJSON(e.cookie("adaptive_pixel_perfect_groups_session")).groups;var n={};for(var o in a.data.sessionGroupSynchronizations){var i=a.data.sessionGroupSynchronizations[o];n[i.name]=i}s.filter(function(e,s,a){return e in n}),e.cookie("adaptive_pixel_perfect_groups_session",e.toJSON({groups:s})),s.length||(e.removeCookie("adaptive_pixel_perfect_groups_session"),t=!1,s=[])}var r={};for(var l in s)r[s[l]]=!0;var p="";for(var o in a.data.sessionGroupSynchronizations){var c=a.data.sessionGroupSynchronizations[o],d={};for(var l in c.synchroParams)d[c.synchroParams[l]]=!0;var _=t&&c.name in r?"active":"";p+='<li class="shab__session-groups-list-item '+_+'" data-name="'+c.name+'"><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("pages"in d?"active":"")+'" data-param="pages"><i class="fa fa-file-o"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("resolutions"in d?"active":"")+'" data-param="resolutions"><i class="fa fa-arrows"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("iframe"in d?"active":"")+'" data-param="iframe"><i class="fa fa-desktop"></i></button><button class="btn btn-default btn-xs btn-block shab__session-groups-list-btn '+_+'">'+c.name+'</button><div class="btn btn-default btn-xs shab__session-groups-btn-drag"><span class="glyphicon glyphicon-move"></span></div><button class="btn btn-default btn-xs shab__session-groups-delete-btn"><span class="glyphicon glyphicon-remove"></span></button></li>'}e(".shab__session-groups-list-ul").empty().append(p)}else void 0!==e.cookie("adaptive_pixel_perfect_groups_session")&&e.removeCookie("adaptive_pixel_perfect_groups_session")}function t(s){var a=[];return s.find(" .shab__session-groups-list-ul > li").each(function(){var s=[];e(this).find(" .shab__session-groups-synchro-params-btn.active").each(function(){s.push(e(this).attr("data-param"))}),a.push({name:e(this).attr("data-name"),synchroParams:s})}),a}function n(){a.onChangeSessionGroups(t(e(".shab__session-groups-list"))),p(!0)}function o(){a.onChangeSessionGroups(t(e(".shab__session-groups-list"))),p(!0)}function i(){a.onChangeSessionGroups(t(e(".shab__session-groups-list"))),p(!0)}function r(e,s){a.onSessionActivatedGroup(e,s),p(!0)}function l(e,s,t){a.onSessionActivatedParam(e,s,t),p(!0)}function p(e){crossModulesFunctions["session.applyAllParamsLocalSession"](e)}e(".shab__btn-open-groups-session").on("click",function(){e(this).hasClass("active")?(e(this).removeClass("active"),e(".shab__session-groups-list").removeClass("open")):(e(this).addClass("active"),e(".shab__session-groups-list").addClass("open"))}),e("body").on("click click.body.iframe",function(s){0==e(s.target).closest(e(".shab__btn-open-groups-session").add(e(".shab__session-groups-list")).add(e("#shab-add-group-session")).add(e("#shab-delete-group-session"))).length&&(e(".shab__btn-open-groups-session").removeClass("active"),e(".shab__session-groups-list").removeClass("open"))}),e(".shab__session-groups-list").prepend("<ul class='shab__session-groups-list-ul'></ul>"),s(),e(".shab__session-groups-list-ul").sortable({axis:"y",items:"> li",placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,update:function(){n()}}).disableSelection(),e(".shab__add-group-session").on("click",function(){e("#shab-add-group-session .modal").modal("show")}),e("#shab-add-group-session .btn-select").on("click",function(){var s=e("#shab-add-group-session .shab-add-group-session__name").val();if(e.trim(s)){var a='<li class="shab__session-groups-list-item" data-name="'+e.trim(s)+'"><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="pages"><i class="fa fa-file-o"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="resolutions"><i class="fa fa-arrows"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="iframe"><i class="fa fa-desktop"></i></button><button class="btn btn-default btn-xs btn-block shab__session-groups-list-btn">'+e.trim(s)+'</button><div class="btn btn-default btn-xs shab__session-groups-btn-drag"><span class="glyphicon glyphicon-move"></span></div><button class="btn btn-default btn-xs shab__session-groups-delete-btn"><span class="glyphicon glyphicon-remove"></span></button></li>';e(".shab__session-groups-list-ul").append(a),o()}else alert("Имя недолжно быть пустым");e("#shab-add-group-session .modal").modal("hide")}),e(".shab__session-groups-list").on("click"," .shab__session-groups-delete-btn",function(){e("#shab-delete-group-session .modal").modal("show");var s=e(this).closest(".shab__session-groups-list-item").attr("data-name");e("#shab-delete-group-session .shab-delete-group-session__name").attr("data-name",s).text(s)}),e("#shab-delete-group-session .btn-select").on("click",function(){e(".shab__session-groups-list-item[data-name='"+e("#shab-delete-group-session .shab-delete-group-session__name").attr("data-name")+"']").remove(),i(),e("#shab-delete-group-session .modal").modal("hide")}),e(".shab__session-groups-list").on("click"," .shab__session-groups-list-btn",function(){e(".shab__session-groups-list.open").length&&(e(this).hasClass("active")?e(this).removeClass("active").closest(".shab__session-groups-list-item").removeClass("active"):e(this).addClass("active").closest(".shab__session-groups-list-item").addClass("active"),r(e(this).closest(".shab__session-groups-list-item").attr("data-name"),e(this).hasClass("active")))}),e(".shab__session-groups-list").on("click"," .shab__session-groups-synchro-params-btn",function(){e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active"),l(e(this).closest(".shab__session-groups-list-item").attr("data-name"),e(this).attr("data-param"),e(this).hasClass("active"))}),a.responseHandlers.onChangeSessionGroups=function(){s(),p(!0)},a.responseHandlers.onSessionActivatedParam=function(s,a,t){e(".shab__session-groups-list-ul [data-name='"+s+"'] [data-param='"+a+"']").toggleClass("active",t),p(!0)},crossModulesFunctions["session.applyAllParamsLocalSession"]=function(e){function s(){t&&"iframe"in t&&"size"in t.iframe?pageManagerVisualizator.setSizeIFrame(t.iframe.size.w,t.iframe.size.h,!0):t&&"resolutions"in t&&"currentResolution"in t.resolutions&&pageManagerVisualizator.setSizeIFrame(t.resolutions.currentResolution.w,t.resolutions.currentResolution.h,!0);var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList()),t&&"resolutions"in t&&"showPageProofsOrDesign"in t.resolutions&&(pixelPerfect.showPageProofsOrDesign(t.resolutions.showPageProofsOrDesign),crossModulesFunctions["pp.refreshButtonsPageProofsOrDesign"](t.resolutions.showPageProofsOrDesign)),t&&"iframe"in t&&"size"in t.iframe&&pageManagerVisualizator.setSizeIFrame(t.iframe.size.w,t.iframe.size.h,!0),t&&"iframe"in t&&"position"in t.iframe&&pageManagerVisualizator.setPositionIFrame(t.iframe.position.left,t.iframe.position.top),t&&"iframe"in t&&"scroll"in t.iframe&&pageManagerVisualizator.setScrollIFrame(t.iframe.scroll.left,t.iframe.scroll.top)}var t=a.getLocalSessionParams(e);t&&"pages"in t&&"currentPage"in t.pages&&(!e||t.pages.currentPage!==pageManagerVisualizator.currentPage)?(pageManagerVisualizator.$container.one("pmv.load.iframe",s),pageManagerVisualizator.selectPage(t.pages.currentPage)):s()}}(),function(){function s(){a.onSelectPage(pageManagerVisualizator.currentPage)}function t(){a.onChangePages(d(e(".pmv__pages-sortable")))}function n(){a.onChangePages(d(e(".pmv__pages-sortable")))}function o(){a.onChangePages(d(e(".pmv__pages-sortable")))}function i(){a.onUpdatePageOrGroup(d(e(".pmv__pages-sortable")))}function r(){a.onChangePages(d(e(".pmv__pages-sortable")))}function l(){a.onChangePages(d(e(".pmv__pages-sortable")))}function p(e,s){return'<li class="pmv__pages-item" data-type="'+e+'" data-name="'+s+'"><div class="pmv__pages-item-content"><button class="btn btn-default btn-xs pmv__pages-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><button class="btn btn-default btn-xs btn-block pmv__pages-btn-name pmv__pages-btn-'+("page"==e?"page":"group btn-yellow")+'">'+s+'</button><button class="btn btn-default btn-xs pmv__pages-btn-delete"><span class="glyphicon glyphicon-remove"></span></button><button class="btn btn-default btn-xs pmv__pages-btn-edit"><span class="glyphicon glyphicon-edit"></span></button><div class="btn btn-default btn-xs pmv__pages-btn-drag"><span class="glyphicon glyphicon-move"></span></div></div></li>'}function c(){var s=a.getLocalSessionParams();P=!1;var t=e(".pmv__pages-sortable-ul");t.empty();var n=function e(a,t){for(var n in a){var o="page"==a[n].type?a[n].urn:a[n].name,i="page"==a[n].type?"page":"group btn-yellow",r="page"==a[n].type&&s&&"pages"in s&&s.pages.currentPage===o?"active":"";t+="<li class='pmv__pages-item "+("collapsed"in a[n]&&a[n].collapsed?"collapsed":"")+"' data-type='"+a[n].type+"' data-name='"+o+"'>",t+='<div class="pmv__pages-item-content"><button class="btn btn-default btn-xs pmv__pages-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><button class="btn btn-default btn-xs btn-block pmv__pages-btn-name pmv__pages-btn-'+i+" "+r+'">'+o+'</button><button class="btn btn-default btn-xs pmv__pages-btn-delete"><span class="glyphicon glyphicon-remove"></span></button><button class="btn btn-default btn-xs pmv__pages-btn-edit"><span class="glyphicon glyphicon-edit"></span></button><div class="btn btn-default btn-xs pmv__pages-btn-drag"><span class="glyphicon glyphicon-move"></span></div></div>',"sub"in a[n]&&(t=e(a[n].sub,t+"<ul>")+"</ul>"),t+="</li>"}return t}(a.data.globalSession.pages,"");t.append(n),m(e(".pmv__pages-sortable")),h(e(".pmv__pages-sortable"))}function d(s){var a=[],t=0,n={0:a};return s.find(".pmv__pages-item").each(function(){var s=e(this).parents(".pmv__pages-item").length;if(s>t){var a=n[t][n[t].length-1];"sub"in a||(a.sub=[],n[s]=a.sub),n[s].push(_(e(this)))}else n[s].push(_(e(this)));t=s}),a}function _(e){var s={};return s.type=e.attr("data-type"),"page"==e.attr("data-type")?s.urn=e.attr("data-name"):s.name=e.attr("data-name"),e.hasClass("collapsed")&&(s.collapsed=!0),s}function u(s){s.find(" ul").addClass("not-childrens"),s.find(" ul > li").each(function(){e(this).parent().removeClass("not-childrens")}),s.find(" ul.not-childrens").remove()}function g(s){s.find(" .pmv__pages-item").each(function(){e(this).hasClass("have-nested")||e(this).removeClass("collapsed")})}function m(s){s.find(" .pmv__pages-item").removeClass("have-nested"),s.find(" ul").each(function(){e(this).parent(".pmv__pages-item").length&&e(this).parent(".pmv__pages-item").addClass("have-nested")})}function h(e){e.find(" .pmv__pages-item.collapsed > ul").css({display:"none"}),e.find(" .pmv__pages-item > ul").not(e.find(" .pmv__pages-item.collapsed > ul")).css({display:"block"})}function v(){a.onChangeResolutions(C()),w()}function b(){a.onChangeResolutions(C()),w(),a.onChangeScreenshots(crossModulesFunctions["pp.allScreenshotsForCurPageToJson"]());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function f(e,s){a.onSelectResolution({w:parseInt(e),h:"auto"!=s?parseInt(s):s});var t=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(t,a.getScreenshotsObjList())}function C(){var s=[];return e(".pp__screenshots-menu-window .pp__resolutions-list-resolution").each(function(){s.push({w:parseInt(e(this).attr("data-w")),h:"auto"!=e(this).attr("data-h")?parseInt(e(this).attr("data-h")):"auto"})}),s}function w(){var s=a.getLocalSessionParams(),t=e(".pp__resolutions-list");if(t.empty(),s&&"pages"in s&&null!==s.pages.currentPage){var n=function(e,a){for(var t in e){var n=e[t],o=n.w,i=n.h,r=s&&"resolutions"in s&&s.resolutions.currentResolution.w===o&&s.resolutions.currentResolution.h===i?"active":"";a+="<li class='pp__resolutions-list-item' data-w='"+o+"' data-h='"+i+"'>",a+='<div class="pp__resolutions-list-item-content"><button class="btn btn-default btn-xs btn-block pp__resolution-name-btn '+r+'"><span class="pp__resolution-name-btn-w">'+o+'</span> | <span class="pp__resolution-name-btn-h">'+i+"</span></button></div>",a+="</li>"}return a}(a.data.globalSession.resolutions,"");t.append(n)}}function y(){var s,t,n,o,i,r,l,p,c=window[pageManagerVisualizator._options.nameIFrame];s=e(c.window).width(),t=e(c.document).width(),i=e(c.window).height(),r=e(c.document).height(),l=e(c.window).scrollTop(),n=e(c.window).scrollLeft(),o=t-s==0?0:n/(t-s),p=r-i==0?0:l/(r-i),a.onScrollIFrame({left:o,top:p})}function x(){var s,t,n,o,i,r,l,p,c=e("#"+pageManagerVisualizator._options.nameIFrame),d=c.closest(".pmv-fitting-wrap"),_=c.closest(".pmv-outer-wrap");s=d.width(),t=d.height(),r=d.position().top,i=d.position().left,n=_.width(),o=_.height(),l=n-s==0?0:i/(n-s),p=o-t==0?0:r/(o-t),a.onChangePosIFrame({left:l,top:p})}function S(){var s=e("#"+pageManagerVisualizator._options.nameIFrame).closest(".pmv-fitting-wrap");M={w:s.width(),h:s.height()},a.onResizeIFrame(M)}pageManagerVisualizator=new modules.pageManagerVisualizator(e("#wrap_iframe"),a,{$mapNavigatorContainer:e(".mnif__navigator-window"),nameIFrame:"PP_iframe",pixelsScrollableInSeconds:2e3,minWOuterScroll:23,minHOuterScroll:23,minWDraggable:15,minHDraggable:15,minWIFrame:320,minHIFrame:480,responsiveToMovementOfTheCursorInAConfinedSpace:!0,movementOfTheCursorInAConfinedSpaceSpred:10,gorizontalFixation:"center",verticalFixation:"top",minHeightCalculateAuto:480,heightCalculateRatio:16/9,calculatedHeightAsMaxHeight:!0,stopAllAnimationsAtResize:!0}),e(".pmv__pages-sortable-scrollwrap").mCustomScrollbar({axis:"y",theme:"dark",scrollbarPosition:"outside",scrollInertia:100,mouseWheel:{scrollAmount:100}}),e(".pmv__select-page-open-list").on("click",function(){e(this).toggleClass("active")});var P=!1;e("body").on("click click.body.iframe",function(s){0!=e(s.target).closest(e(".pmv__select-page-open-list").add(e(".pmv__pages-window, #modal-pmv-add-page-href, #pmv__modal-add-group, #shab__page-or-group-delete, #shab__page-or-group-update"))).length||P||e(".pmv__select-page-open-list").removeClass("active")}),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-page",function(){e(".pmv__pages-btn-page").removeClass("active"),e(this).addClass("active"),pageManagerVisualizator.selectPage(e(this).closest(".pmv__pages-item").attr("data-name")),e(".pmv__select-page-open-list").hasClass("active")&&e(".pmv__select-page-open-list").removeClass("active"),s()}),e("#modal-pmv-add-page-href .btn-select").on("click",function(s){var n=e("#modal-pmv-add-page-href .pmv-href").val();e(".pmv__modal-urn-exists").css({display:""}),e(".pmv__modal-urn-empty").css({display:""}),e(".pmv__modal-add-page-content").removeClass("has-error"),e.trim(n)?a.getPage(n)===!1?function(){e(".pmv__pages-sortable > ul").prepend(p("page",e.trim(n))),e("#modal-pmv-add-page-href .modal").modal("hide"),t()}():(e(".pmv__modal-urn-exists").css({display:"block"}),e(".pmv__modal-add-page-content").addClass("has-error")):(e(".pmv__modal-urn-empty").css({display:"block"}),e(".pmv__modal-add-page-content").addClass("has-error"))}),e(".pmv__add-page").on("click",function(){e(".pmv__modal-urn-exists").css({display:""}),e(".pmv__modal-urn-empty").css({display:""}),e(".pmv__modal-add-page-content").removeClass("has-error"),pageManagerVisualizator._options.nameIFrame in window&&e("#modal-pmv-add-page-href .pmv-href").val(window[pageManagerVisualizator._options.nameIFrame].window.location.href),e("#modal-pmv-add-page-href .modal").modal("show")}),e("#modal-pmv-add-page-href").on("shown.bs.modal",function(s){e("#modal-pmv-add-page-href .pmv-href").get(0).focus()}),e("#pmv__modal-add-group .btn-select").on("click",function(s){var t=e("#pmv__modal-add-group .pmv__modal-name-group").val();e("#pmv__modal-add-group .pmv__modal-name-exists").css({display:""}),e("#pmv__modal-add-group .pmv__modal-name-empty").css({display:""}),e(".pmv__modal-add-group-content").removeClass("has-error"),e.trim(t)?a.getGroup(t)===!1?function(){e(".pmv__pages-sortable > ul").prepend(p("group",e.trim(t))),e("#pmv__modal-add-group .modal").modal("hide"),n()}():(e(".pmv__modal-name-exists").css({display:"block"}),e(".pmv__modal-add-group-content").addClass("has-error")):(e("#pmv__modal-add-group .pmv__modal-name-empty").css({display:"block"}),e(".pmv__modal-add-group-content").addClass("has-error"))}),e(".pmv__add-group").on("click",function(){e("#pmv__modal-add-group .pmv__modal-name-exists").css({display:""}),e("#pmv__modal-add-group .pmv__modal-name-empty").css({display:""}),e(".pmv__modal-add-group-content").removeClass("has-error"),e("#pmv__modal-add-group .modal").modal("show")}),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-delete",function(){e(this).closest(".pmv__pages-item").hasClass("have-nested")?e("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").css({display:"inline-block"}):e("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").css({display:"none"}),e("#shab__page-or-group-delete .modal").modal("show");var s=e(this).closest(".pmv__pages-item").attr("data-name"),a=e(this).closest(".pmv__pages-item").attr("data-type");e("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name",s).text(s),e("#shab__page-or-group-delete .shab__page-or-group__type").text("page"==a?"страницу":"группу")}),e("#shab__page-or-group-delete .shab__page-or-group-delete-btn").on("click",function(){var s=e("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name"),a=e(".pmv__pages-item[data-name='"+s+"'] > ul > .pmv__pages-item").remove();e(".pmv__pages-item[data-name='"+s+"']").after(a),e(".pmv__pages-item[data-name='"+s+"']").remove();var t=e(".pmv__pages-sortable");u(t),m(t),g(t),e("#shab__page-or-group-delete .modal").modal("hide"),o()}),e("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").on("click",function(){e(".pmv__pages-item[data-name='"+e("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name")+"']").remove();var s=e(".pmv__pages-sortable");u(s),m(s),g(s),e("#shab__page-or-group-delete .modal").modal("hide"),o()}),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-edit",function(){e("#shab__page-or-group-update .modal").modal("show");var s=e(this).closest(".pmv__pages-item").attr("data-name"),a=e(this).closest(".pmv__pages-item").attr("data-type");e("#shab__page-or-group-update .shab__page-or-group__name").attr("data-name",s),e("#shab__page-or-group-update .shab__page-or-group-update__name").val(s),e("#shab__page-or-group-update .shab__page-or-group__type").attr("data-type",a).text("page"==a?"новый URN":"новое имя")}),e("#shab__page-or-group-update .btn-select").on("click",function(){function t(){var a=e(".pmv__pages-sortable .pmv__pages-item[data-type='"+o+"'][data-name='"+n+"']");a.attr("data-name",r).find(" > * > .pmv__pages-btn-name").text(r),e("#shab__page-or-group-update .modal").modal("hide"),"page"==o&&a.find(" .pmv__pages-btn-page").hasClass("active")?(pageManagerVisualizator.selectPage(r),i(),s()):i()}var n=e("#shab__page-or-group-update .shab__page-or-group__name").attr("data-name"),o=e("#shab__page-or-group-update .shab__page-or-group__type").attr("data-type"),r=e("#shab__page-or-group-update .shab__page-or-group-update__name").val();e("#shab__page-or-group-update .pmv__modal-urn-exists").css({display:""}),e("#shab__page-or-group-update .pmv__modal-name-exists").css({display:""}),e("#shab__page-or-group-update .pmv__modal-empty").css({display:""}),e("#shab__page-or-group-update .pmv__modal-content").removeClass("has-error"),"page"==o?e.trim(r)?a.getPage(r)===!1?t():(e("#shab__page-or-group-update .pmv__modal-urn-exists").css({display:"block"}),e("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):(e("#shab__page-or-group-update .pmv__modal-empty").css({display:"block"}),e("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):e.trim(r)?a.getGroup(r)===!1?t():(e("#shab__page-or-group-update .pmv__modal-name-exists").css({display:"block"}),e("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):(e("#shab__page-or-group-update .pmv__modal-empty").css({display:"block"}),e("#shab__page-or-group-update .pmv__modal-content").addClass("has-error"))}),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-collapsed",function(){var s=e(this).closest(".pmv__pages-item");s.hasClass("collapsed")?s.removeClass("collapsed").find(" > ul").css({display:"block"}):s.addClass("collapsed").find(" > ul").css({display:"none"}),l()}),a.responseHandlers.onSelectPage=function(s){var t=a.getLocalSessionParams(!0);t&&"pages"in t&&"currentPage"in t.pages&&t.pages.currentPage!==pageManagerVisualizator.currentPage&&(e(".pmv__pages-btn-page").removeClass("active"),e(".pmv__pages-item[data-name='"+t.pages.currentPage+"'] > * > .pmv__pages-btn-page").addClass("active"),pageManagerVisualizator.selectPage(t.pages.currentPage))},a.responseHandlers.onChangePages=function(e){c()},a.responseHandlers.onUpdatePageOrGroup=function(e){c()},e(".pmv__pages-sortable").prepend("<ul class='pmv__pages-sortable-ul'></ul>"),e(".pmv__pages-sortable-ul").nestedSortable({forcePlaceholderSize:!0,handle:"div",items:"li",placeholder:"placeholder",revert:250,tabSize:25,toleranceElement:"> div",listType:"ul",helper:"clone",maxLevels:3,isTree:!0,start:function(){P=!0},stop:function(){P=!1},update:function(s,a){var t=e(".pmv__pages-sortable");u(t),m(t),g(t),r()}}),c(),e("#pp__modal-add-resolution .btn-select").on("click",function(s){var t=!1,n=e.trim(e("#pp__modal-add-resolution .pp__modal-add-resolution-w").val()),o=e.trim(e("#pp__modal-add-resolution .pp__modal-add-resolution-h").val());if(/^[1-9]\w{2,4}$/gim.test(n)&&parseInt(n)>=320&&parseInt(n)<=99999||(t=!0,e("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").addClass("has-error"),e("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:"block"})),"auto"==o||/^[1-9]\w{2,4}$/gim.test(o)&&parseInt(o)>=320&&parseInt(o)<=99999||(t=!0,e("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").addClass("has-error"),e("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:"block"})),!t)for(var i in a.data.globalSession.resolutions){var r=a.data.globalSession.resolutions[i];if(parseInt(n)===r.w&&("auto"===o||parseInt(o)===r.h)){t=!0,e("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").addClass("has-error"),e("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").addClass("has-error"),e("#pp__modal-add-resolution .pp__modal-val-exists").css({display:"block"});break}}if(!t){var l="<li class='pp__resolutions-list-resolution' data-w='"+n+"' data-h='"+o+'\'><div class="pp__resolutions-list-resolution-content"><button class="btn btn-default btn-xs btn-block pp__resolutionforscreen-name-btn"><span class="pp__resolutionforscreen-name-btn-w">'+n+'</span> | <span class="pp__resolutionforscreen-name-btn-h">'+o+'</span></button><button class="btn btn-default btn-xs pp__resolutions-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-drag-btn"><span class="glyphicon glyphicon-move"></span></div></div><ul class="pp__resolutions-list-screenshots"></ul></li>';e(".pp__resolutions-screenshots-list").prepend(l),e("#pp__modal-add-resolution .modal").modal("hide"),v()}}),e(".pp__add-resolution-btn").on("click",function(){e("#pp__modal-add-resolution .pp__modal-val-exists").css({display:""}),e("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:""}),e("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").removeClass("has-error"),e("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").removeClass("has-error"),e("#pp__modal-add-resolution .modal").modal("show")}),e(".pp__screenshots-menu").on("click"," .pp__resolutions-delete-btn",function(){var s=e(this).closest(".pp__resolutions-list-resolution").attr("data-w"),a=e(this).closest(".pp__resolutions-list-resolution").attr("data-h");e("#pp__modal-delete-resolution .pp__modal-delete-resolution-w").attr("data-w",s).text(s),e("#pp__modal-delete-resolution .pp__modal-delete-resolution-h").attr("data-h",a).text(a),e("#pp__modal-delete-resolution .modal").modal("show")}),e("#pp__modal-delete-resolution .btn-select").on("click",function(){e('.pp__screenshots-menu .pp__resolutions-list-resolution[data-w="'+e("#pp__modal-delete-resolution .pp__modal-delete-resolution-w").attr("data-w")+'"][data-h="'+e("#pp__modal-delete-resolution .pp__modal-delete-resolution-h").attr("data-h")+'"]').remove(),e("#pp__modal-delete-resolution .modal").modal("hide"),b()}),e(".pp__resolutions-menu").on("click"," .pp__resolution-name-btn",function(){var s=e(this).closest(".pp__resolutions-list-item"),a=s.attr("data-w"),t=s.attr("data-h");e(".pp__resolutions-list-item, .pp__resolution-name-btn, .pp__resolutionforscreen-name-btn").removeClass("active"),e(".pp__resolutions-list-item[data-w='"+a+"'][data-h='"+t+"']").addClass("active").find(" .pp__resolution-name-btn").addClass("active"),e(".pp__resolutions-list-resolution[data-w='"+a+"'][data-h='"+t+"'] .pp__resolutionforscreen-name-btn").addClass("active"),f(a,t),pageManagerVisualizator.setSizeIFrame(a,t)}),crossModulesFunctions["pmv.sendSortableResolutions"]=function(){a.onChangeResolutions(C()),w(),crossModulesFunctions["pmv.refreshMenuViewScreenshotsForResolutions"]()},a.responseHandlers.onChangeResolutions=function(e){w(),crossModulesFunctions["pmv.refreshMenuViewScreenshotsForResolutions"]()},a.responseHandlers.onSelectResolution=function(s){var t=a.getLocalSessionParams(!0);t&&"resolutions"in t&&"currentResolution"in t.resolutions&&(e(".pp__resolutions-list-item, .pp__resolution-name-btn, .pp__resolutionforscreen-name-btn").removeClass("active"),e(".pp__resolutions-list-item[data-w='"+s.val.w+"'][data-h='"+s.val.h+"']").addClass("active").find(" .pp__resolution-name-btn").addClass("active"),e(".pp__resolutions-list-resolution[data-w='"+s.val.w+"'][data-h='"+s.val.h+"'] .pp__resolutionforscreen-name-btn").addClass("active"),pageManagerVisualizator.setSizeIFrame(t.resolutions.currentResolution.w,t.resolutions.currentResolution.h));var n=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(n,a.getScreenshotsObjList())},w(),pageManagerVisualizator.$container.on("csif.scroll",y),pageManagerVisualizator.$container.on("fcar.scroll",y),pageManagerVisualizator.$container.on("mnif.changePos",x);var k=null,z=null,M=null;pageManagerVisualizator.$container.on("rifStartResize",function(){S(),k=setInterval(function(){null===z||M.w===z.w&&M.h===z.h||S()},500)}),pageManagerVisualizator.$container.on("rifResize",function(){var s=e("#"+pageManagerVisualizator._options.nameIFrame).closest(".pmv-fitting-wrap");z={w:s.width(),h:s.height()}}),pageManagerVisualizator.$container.on("rifStopResize",function(){null!==k&&(clearInterval(k),k=null,z=null,M=null),S()}),a.responseHandlers.onResizeIFrame=function(e){var s=a.getLocalSessionParams(!0);s&&"iframe"in s&&"size"in s.iframe&&pageManagerVisualizator.setSizeIFrame(s.iframe.size.w,s.iframe.size.h,!0)},a.responseHandlers.onChangePosIFrame=function(e){var s=a.getLocalSessionParams(!0);s&&"iframe"in s&&"position"in s.iframe&&pageManagerVisualizator.setPositionIFrame(s.iframe.position.left,s.iframe.position.top)},a.responseHandlers.onScrollIFrame=function(e){var s=a.getLocalSessionParams(!0);s&&"iframe"in s&&"scroll"in s.iframe&&pageManagerVisualizator.setScrollIFrame(s.iframe.scroll.left,s.iframe.scroll.top)},pageManagerVisualizator.$container.on({"pmv.prepaste.iframe":function(){e("#loading").css({width:"100%",height:"100%"}).addClass("show")},"pmv.load.iframe":function(){e("#loading").removeClass("show"),setTimeout(function(){e("#loading").css({width:"0",height:"0"})},500)}}),pageManagerVisualizator._create()}(),function(){function s(e,s){u(e,s)}function t(e,s){g(e,s)}function n(e,s){m(e,s)}function o(s){81!=s.which||!s.ctrlKey||s.shiftKey||s.altKey||(e(".pp__50p-btn, .pp__design-btn").hasClass("active")?(pixelPerfect.showPageProofsOrDesign(0),v(0)):(pixelPerfect.showPageProofsOrDesign(1),v(1)),s=s||window.e,s.stopPropagation?s.stopPropagation():s.cancelBubble=!0,s.preventDefault())}function i(e){crossModulesFunctions["pp.refreshButtonsPageProofsOrDesign"](e)}function r(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function l(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function p(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function c(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function d(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function _(){a.onChangeScreenshots(b());var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())}function u(s,t){if(void 0!==e(".pp__deviation").data("screenshot")){var n=e(".pp__deviation").data("screenshot");e(s.currentTarget).hasClass("pp__deviation-left-px")?n.lpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-left-percent")?n.lper=parseFloat(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-px")?n.tpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-percent")&&(n.tper=parseFloat(e(s.currentTarget).val())),T=b(),a.onChangeScreenshots(T),F=a.getCurrentRelatedScreenshotsCollection(),O=a.getScreenshotsObjList(),pixelPerfect.refreshScrins(F,O)}}function g(s,t){if(void 0!==e(".pp__deviation").data("screenshot")){var n=e(".pp__deviation").data("screenshot");e(s.currentTarget).hasClass("pp__deviation-left-px")?n.lpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-left-percent")?n.lper=parseFloat(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-px")?n.tpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-percent")&&(n.tper=parseFloat(e(s.currentTarget).val())),a.onFastChangeScreenshots(T),
pixelPerfect.refreshScrins(F,O)}}function m(s,t){if(void 0!==e(".pp__deviation").data("screenshot")){var n=e(".pp__deviation").data("screenshot");e(s.currentTarget).hasClass("pp__deviation-left-px")?n.lpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-left-percent")?n.lper=parseFloat(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-px")?n.tpx=parseInt(e(s.currentTarget).val()):e(s.currentTarget).hasClass("pp__deviation-top-percent")&&(n.tper=parseFloat(e(s.currentTarget).val())),a.onChangeScreenshots(b());var o=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(o,a.getScreenshotsObjList())}}function h(){a.onCollapseUncollapseScreenshotsFolder(M(e(".pp__screenshots-files-menu-scrollwrap")))}function v(e){a.onHTMLOrDesign(e)}function b(){var s={};return e(".pp__screenshots-menu-window .pp__resolutions-list-screenshot").each(function(){var a=e(this).closest(".pp__resolutions-list-resolution"),t=a.attr("data-w"),n=a.attr("data-h"),o=t+"|"+n;o in s||(s[o]=[]);var i;void 0===e(this).data("screenshot")&&(i={urn:e(this).attr("data-urn"),active:!1,pos:"static",l:"center",t:"top",lpx:0,tpx:0,lper:0,tper:0},e(this).data("screenshot",i)),s[o].push(e(this).data("screenshot"))}),s}function f(){var s=a.getLocalSessionParams();I=[];var t=e(".pp__resolutions-screenshots-list");if(t.empty(),s&&"pages"in s&&null!==s.pages.currentPage){var n=function(e,t){for(var n in e){var o=e[n],i=o.w,r=o.h,l=s&&"resolutions"in s&&s.resolutions.currentResolution.w===i&&s.resolutions.currentResolution.h===r?"active":"";t+="<li class='pp__resolutions-list-resolution' data-w='"+i+"' data-h='"+r+"'>",t+='<div class="pp__resolutions-list-resolution-content"><button class="btn btn-default btn-xs btn-block pp__resolutionforscreen-name-btn '+l+'"><span class="pp__resolutionforscreen-name-btn-w">'+i+'</span> | <span class="pp__resolutionforscreen-name-btn-h">'+r+'</span></button><button class="btn btn-default btn-xs pp__resolutions-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-drag-btn"><span class="glyphicon glyphicon-move"></span></div></div>',t+="<ul class='pp__resolutions-list-screenshots'>"+S(s.pages.currentPage,o,a.data.globalSession.designScreenshotsRelatedResolutionAndPage)+"</ul>",t+="</li>"}return t}(a.data.globalSession.resolutions,"");t.append(n);var o=0;t.find(" .pp__resolutions-list-screenshot").each(function(){e(this).data("screenshot",I[o]),o++})}P()}function C(e,s,a,t,n,o,i,r){w(e,s,a,t),y(e,n,o,i,r)}function w(e,s,a,t){var n=e.find(" .pp__deviation-fixed-or-static label").first(),o=e.find(" .pp__deviation-fixed-or-static label").last();"static"==s?(n.removeClass("btn-default").addClass("btn-primary active"),n.find(" input").prop("checked",!0),o.addClass("btn-default").removeClass("btn-danger active"),o.find(" input").prop("checked",!1)):(n.addClass("btn-default").removeClass("btn-primary active"),n.find(" input").prop("checked",!1),o.removeClass("btn-default").addClass("btn-danger active"),o.find(" input").prop("checked",!0)),"static"==s&&(t="top");var i=e.find(" .pp__deviation-relative");"static"==s?(i.addClass("pp__deviation-static").removeClass("pp__deviation-fixed"),i.find(" .btn[data-top!='top']").addClass("disabled")):(i.removeClass("pp__deviation-static").addClass("pp__deviation-fixed"),i.find(" .btn[data-top!='top']").removeClass("disabled")),i.find(" .btn").removeClass("active btn-danger").addClass("btn-default"),i.find(" .btn[data-left='"+a+"'][data-top='"+t+"']").addClass("active btn-danger").removeClass("btn-default")}function y(e,s,a,t,n){var o=e.find(" .pp__deviation-input");o.filter(".pp__deviation-left-px").val(s),o.filter(".pp__deviation-left-percent").val(a),o.filter(".pp__deviation-top-px").val(t),o.filter(".pp__deviation-top-percent").val(n)}function x(e){e.find(" .pp__deviation-left-px").add(e.find(" .pp__deviation-top-px")).spinner({min:-99999,max:99999,start:s,spin:t,stop:n}),e.find(" .pp__deviation-left-percent").add(e.find(" .pp__deviation-top-percent")).spinner({min:-9999,max:9999,step:.1,start:s,spin:t,stop:n})}function S(e,s,t){if(e in t&&s.w+"|"+s.h in t[e]){var n=a.getScreenshotsObjList(),o=t[e][s.w+"|"+s.h],i="";for(var r in o){var l=o[r];"static"==l.pos&&(l.t="top"),I.push(l),i+='<li class="pp__resolutions-list-screenshot '+(l.active?"active":"")+'" data-urn="'+l.urn+'" data-w="'+n[l.urn].w+'" data-h="'+n[l.urn].h+'"><div class="pp__screenshot-content"><button class="btn btn-default btn-xs btn-block pp__screenshot-name-btn '+(l.active?"active":"")+'"><div class="btn btn-default btn-xs pp__resolutions-screenshots-btn-size" data-w="'+n[l.urn].w+'" data-h="'+n[l.urn].h+'"><span class="pp__screenshot-name-btn-w">'+n[l.urn].w+'</span> | <span class="pp__screenshot-name-btn-h">'+n[l.urn].h+"</span></div>"+l.urn+'</button><button class="btn btn-default btn-xs pp__resolutions-screenshots-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-screenshots-drag-btn"><span class="glyphicon glyphicon-move"></span></div><button class="pp__resolutions-screenshots-btn-deviation btn btn-default btn-xs"><i class="glyphicon glyphicon-option-vertical" aria-hidden="true"></i></button></div></li>'}return i}return""}function P(){e(".pp__resolutions-list-screenshots").sortable({revert:!0,cursor:"move",axis:"y",items:" > li",distance:5,connectWith:".pp__resolutions-list-screenshots",placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,remove:function(e,s){},stop:function(){},update:p})}function k(){var s=(a.getLocalSessionParams(),e(".pp__screenshots-files-list"));s.empty();var t=function e(s,t){for(var n in s){var o=s[n],i={};for(key in a.data.globalSession.designScreenshotsFoldersUncollapsed)i[a.data.globalSession.designScreenshotsFoldersUncollapsed[key]]=!0;var r="file"==o.type?"file":"folder btn-yellow";t+="<li class='pp__screenshots-item "+(o.urn in i?"":"collapsed")+"' data-type='"+o.type+"' data-name='"+o.name+"' data-urn='"+o.urn+"'>",t+='<div class="pp__screenshots-item-content"><button class="btn btn-default btn-xs pp__screenshots-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><div class="btn btn-default btn-xs btn-block pp__screenshots-btn-name pp__screenshots-btn-'+r+'">'+("file"==o.type?'<div class="btn btn-default btn-xs pp__screenshots-btn-size" data-w="'+o.w+'" data-h="'+o.h+'"><span class="pp__screenshots-btn-size-w">'+o.w+'</span> | <span class="pp__screenshots-btn-size-h">'+o.h+"</span></div>":"")+o.name+"</div>"+("file"==o.type?'<button class="btn btn-success btn-xs pp__screenshots-btn-add-screenshot"><span class="glyphicon glyphicon-plus-sign"></span></button>':"")+"</div>","sub"in o&&(t=e(o.sub,t+"<ul>")+"</ul>"),t+="</li>"}return t}(a.data.globalSession.designScreenshots,"");s.append(t),z(e(".pp__screenshots-files-menu-scrollwrap"))}function z(s){s.find(" .pp__screenshots-item").removeClass("have-nested"),s.find(" ul").each(function(){e(this).parent(".pp__screenshots-item").length&&e(this).parent(".pp__screenshots-item").addClass("have-nested")}),s.find(" .pp__screenshots-item").each(function(){e(this).hasClass("have-nested")||e(this).removeClass("collapsed")}),s.find(" .pp__screenshots-item.collapsed > ul").css({display:"none"}),s.find(" .pp__screenshots-item > ul").not(s.find(" .pp__screenshots-item.collapsed > ul")).css({display:"block"})}function M(s){return s.find(" .pp__screenshots-item").map(function(){return e(this).hasClass("have-nested")&&!e(this).hasClass("collapsed")?e(this).attr("data-urn"):null}).get().filter(function(e){return e!==!1})}pixelPerfect=new modules.pixelPerfect(e("#wrap_iframe .pmv-fitting-wrap"),{dirScrins:"design-screenshots",nameIFrame:"PP_iframe"}),pageManagerVisualizator.$container.on("pmv.load.iframe",function(){pixelPerfect._destroy(),pixelPerfect._create();var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList());var s=a.getLocalSessionParams(!1);s&&"resolutions"in s&&"showPageProofsOrDesign"in s.resolutions&&pixelPerfect.showPageProofsOrDesign(s.resolutions.showPageProofsOrDesign),f()}),e(".pp__screenshots-menu-scrollwrap, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").mCustomScrollbar({axis:"y",theme:"dark",scrollbarPosition:"outside",scrollInertia:100,mouseWheel:{scrollAmount:100},callbacks:{onUpdate:function(){}}}),e(".pp__btn-open-screenshots").on("click",function(){e(this).hasClass("active")?(e(this).removeClass("active"),e(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap").removeClass("open")):(e(this).addClass("active"),e(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap").addClass("open"))}),e("body").on("click click.body.iframe",function(s){0==e(s.target).closest(e(".pp__btn-open-screenshots").add(e(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap, .pp__resolutions-menu, #pp__modal-add-resolution, #pp__modal-delete-resolution"))).length&&(e(".pp__btn-open-screenshots").removeClass("active"),e(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").removeClass("open"))}),e(".pp__screenshots-files-menu-scrollwrap").on("click"," .pp__screenshots-btn-add-screenshot",function(){if(e(".pp__screenshots-menu-scrollwrap .pp__resolutions-list-resolution").length){var s=e(this).closest(".pp__screenshots-item"),a=s.attr("data-urn"),t=s.find(" .pp__screenshots-btn-size"),n=t.attr("data-w"),o=t.attr("data-h"),i='<li class="pp__resolutions-list-screenshot" data-urn="'+a+'" data-w="'+n+'" data-h="'+o+'"><div class="pp__screenshot-content"><button class="btn btn-default btn-xs btn-block pp__screenshot-name-btn"><div class="btn btn-default btn-xs pp__resolutions-screenshots-btn-size" data-w="'+n+'" data-h="'+o+'"><span class="pp__screenshot-name-btn-w">'+n+'</span> | <span class="pp__screenshot-name-btn-h">'+o+"</span></div>"+a+'</button><button class="btn btn-default btn-xs pp__resolutions-screenshots-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-screenshots-drag-btn"><span class="glyphicon glyphicon-move"></span></div><button class="pp__resolutions-screenshots-btn-deviation btn btn-default btn-xs"><i class="glyphicon glyphicon-option-vertical" aria-hidden="true"></i></button></div></li>';e(".pp__screenshots-menu-scrollwrap .pp__resolutions-list-screenshots").first().prepend(e(i)),r()}}),e(".pp__screenshots-menu").on("click"," .pp__resolutions-screenshots-delete-btn",function(s){s.stopPropagation(),e(this).closest(".pp__resolutions-list-screenshot").remove(),l()}),e(".pp__screenshots-menu").on("click"," .pp__screenshot-name-btn",function(){var s=e(this).closest(".pp__resolutions-list-screenshot");e(this).hasClass("active")?(e(this).removeClass("active"),s.removeClass("active").data("screenshot").active=!1):(e(this).addClass("active"),s.addClass("active").data("screenshot").active=!0),c()}),e(".pp__screenshots-menu").on("click"," .pp__resolutions-screenshots-btn-deviation",function(s){var a=e(this).closest(".pp__resolutions-list-screenshot").data("screenshot");e(".pp__deviation").data("screenshot",a),C(e(".pp__deviation"),a.pos,a.l,a.t,a.lpx,a.lper,a.tpx,a.tper),e(".pp__deviation").addClass("open")}),e("body").on("click click.body.iframe",function(s){0==e(s.target).closest(e(".pp__resolutions-screenshots-btn-deviation").add(e(".pp__deviation"))).length&&e(".pp__deviation").removeClass("open")}),e(".pp__screenshots-menu-window").on("click"," .pp__deviation-fixed-or-static label",function(){if(void 0!==e(".pp__deviation").data("screenshot")){var s=1==e(this).find(" input").val()?"static":"fixed",a=e(".pp__deviation").data("screenshot");a.pos=s,"static"==a.pos&&(a.t="top"),w(e(".pp__deviation"),a.pos,a.l,a.t),d()}}),e(".pp__screenshots-menu-window").on("click"," .pp__deviation-relative .btn[data-left][data-top]",function(){if(void 0!==e(".pp__deviation").data("screenshot")){var s=e(".pp__deviation").data("screenshot");"static"==s.pos&&"top"!=e(this).attr("data-top")||(s.l=e(this).attr("data-left"),s.t=e(this).attr("data-top"),w(e(".pp__deviation"),s.pos,s.l,s.t),_())}}),e(".pp__screenshots-files-menu-scrollwrap").on("click"," .pp__screenshots-btn-collapsed",function(){var s=e(this).closest(".pp__screenshots-item");s.hasClass("collapsed")?s.removeClass("collapsed").find(" > ul").css({display:"block"}):s.addClass("collapsed").find(" > ul").css({display:"none"}),h()}),e(".pp__verstka-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(0),i(0),v(0)}),e(".pp__50p-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(1),i(1),v(1)}),e(".pp__design-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(2),i(2),v(2)}),e("body").on("keydown",o),pageManagerVisualizator.$container.on("pmv.load.iframe",function(){e("#"+pageManagerVisualizator._options.nameIFrame).contents().find("body").on("keydown",o)}),crossModulesFunctions["pp.refreshButtonsPageProofsOrDesign"]=function(s){switch(e(".pp__verstka-design .btn").removeClass("active btn-primary btn-success btn-info btn-warning btn-danger").addClass("btn-default"),s){case 0:e(".pp__verstka-btn").removeClass("btn-default").addClass("active btn-primary");break;case 1:e(".pp__50p-btn").removeClass("btn-default").addClass("active btn-warning");break;case 2:e(".pp__design-btn").removeClass("btn-default").addClass("active btn-danger")}};var F,O,T;a.responseHandlers.onChangeScreenshots=function(){f();var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())},a.responseHandlers.onFastChangeScreenshots=function(){var e=a.getCurrentRelatedScreenshotsCollection();pixelPerfect.refreshScrins(e,a.getScreenshotsObjList())},a.responseHandlers.onCollapseUncollapseScreenshotsFolder=function(){k()},a.responseHandlers.onHTMLOrDesign=function(){var e=a.getLocalSessionParams(!0);e&&"resolutions"in e&&"showPageProofsOrDesign"in e.resolutions&&(pixelPerfect.showPageProofsOrDesign(e.resolutions.showPageProofsOrDesign),crossModulesFunctions["pp.refreshButtonsPageProofsOrDesign"](e.resolutions.showPageProofsOrDesign))},crossModulesFunctions["pp.allScreenshotsForCurPageToJson"]=function(){return b()},e(".pp__screenshots-menu").prepend("<ul class='pp__resolutions-screenshots-list'></ul>"),f(),e(".pp__resolutions-screenshots-list").sortable({revert:!0,cursor:"move",axis:"y",items:" > li",distance:5,placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,update:crossModulesFunctions["pmv.sendSortableResolutions"]});var I;crossModulesFunctions["pmv.refreshMenuViewScreenshotsForResolutions"]=function(){f()},function(){e(".pp__screenshots-menu-window").append('<div class="pp__deviation panel panel-primary"><div class="panel-body"><div class="row"><div class="col-xs-6 pp__deviation-col-left"><form class="pp__deviation-fixed-or-static btn-group-vertical btn-toggle-one-color" data-toggle="buttons"><label class="btn" data-btn-color="primary"><input type="radio" name="sm-radio-fixed-or-static" value="1" />Static</label><label class="btn" data-btn-color="danger"><input type="radio" name="sm-radio-fixed-or-static" value="0" />Fixed</label></form></div><div class="col-xs-6 pp__deviation-col-right"><div class="pp__deviation-relative btn-group-table"><div class="btn-group btn-group-justified" role="group"><div class="btn" data-left="left" data-top="top" role="button">&nbsp</div><div class="btn" data-left="center" data-top="top" role="button">&nbsp</div><div class="btn" data-left="right" data-top="top" role="button">&nbsp</div></div><div class="btn-group btn-group-justified" role="group"><div class="btn disabled" data-left="left" data-top="center" role="button">&nbsp</div><div class="btn disabled" data-left="center" data-top="center" role="button">&nbsp</div><div class="btn disabled" data-left="right" data-top="center" role="button">&nbsp</div></div><div class="btn-group btn-group-justified" role="group"><div class="btn disabled" data-left="left" data-top="bottom" role="button">&nbsp</div><div class="btn disabled" data-left="center" data-top="bottom" role="button">&nbsp</div><div class="btn disabled" data-left="right" data-top="bottom" role="button">&nbsp</div></div></div></div></div><div class="row row-name-px-percent"><div class="col-xs-6 pp__deviation-col-left"><p>px</p></div><div class="col-xs-6 pp__deviation-col-right"><p>%</p></div></div><div class="row row-otklonenie-1"><div class="col-xs-6 pp__deviation-col-left"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-left-px"><div class="input-group-addon"><span class="fa fa-long-arrow-right"></span></div></div></div><div class="col-xs-6 pp__deviation-col-right"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-left-percent"><div class="input-group-addon"><span class="fa fa-long-arrow-right"></span></div></div></div></div><div class="row row-otklonenie-2"><div class="col-xs-6 pp__deviation-col-left"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-top-px"><div class="input-group-addon">&nbsp<span class="fa fa-long-arrow-down"></span>&nbsp</div></div></div><div class="col-xs-6 pp__deviation-col-right"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-top-percent"><div class="input-group-addon">&nbsp<span class="fa fa-long-arrow-down"></span>&nbsp</div></div></div></div></div></div>'),x(e(".pp__deviation"))}(),e(".pp__screenshots-files-menu-scrollwrap").prepend('<ul class="pp__screenshots-files-list"></ul>'),k();var L=null;e(".pp__screenshots-files-menu-scrollwrap").on("mouseenter"," .pp__screenshots-item[data-type='file']",function(){e(".pp__screenshot-thumbnail").empty().append('<img src="/design-screenshots/design-thumbnails/'+e(this).attr("data-urn")+'" width="320" height="auto" />'),e(".pp__screenshot-thumbnail-scrollwrap").addClass("open"),e(".pp__screenshots-files-menu-scrollwrap").addClass("shadow-hidden")}),e(".pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").on({mouseenter:function(){null!==L&&clearTimeout(L)},mouseleave:function(){L=setTimeout(function(){L=null,e(".pp__screenshot-thumbnail-scrollwrap").removeClass("open"),e(".pp__screenshots-files-menu-scrollwrap").removeClass("shadow-hidden")},10)}})}(),crossModulesFunctions["session.applyAllParamsLocalSession"](!1),e(document).ready(function(){e("body").on("keydown",function(e){49==e.which&&e.altKey&&console.log(navigator.userAgent)})}),e(document).ready(function(){e('[data-toggle="tooltip"]').tooltip(),e('[data-toggle="popover"]').popover()})}var a,t=io.connect("/");t.once("session.load",function(e){a=new modules.sessionModel(e,t),s()})});
//# sourceMappingURL=main.js.map
