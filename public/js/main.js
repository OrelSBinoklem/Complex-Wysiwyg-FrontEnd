jQuery(function(e){function a(){!function(){function a(){"openOptionsTimeLine__close"in n&&n.openOptionsTimeLine__close.pause(),e(" .shab__global-settings").css({display:"block",opacity:0,transform:"scale(0.8, 0.8)"}),"openOptionsTimeLine"in n?n.openOptionsTimeLine.restart():n.openOptionsTimeLine=(new TimelineLite).append([TweenMax.to(e(".shab__global-settings"),.5,{css:{transform:"scale(1, 1)"}}),TweenMax.to(e(".shab__global-settings"),.3,{css:{opacity:1}})]),e(".shab__global-settings-btn").addClass("active")}function s(){function a(){e(".shab__global-settings").css("display","none")}"openOptionsTimeLine"in n&&n.openOptionsTimeLine.pause(),"openOptionsTimeLine__close"in n?n.openOptionsTimeLine__close.restart():n.openOptionsTimeLine__close=(new TimelineLite).append([TweenMax.to(e(".shab__global-settings"),.5,{css:{transform:"scale(0.8, 0.8)"},onComplete:a}),TweenMax.to(e(".shab__global-settings"),.5,{css:{opacity:0}})]),e(".shab__global-settings-btn").removeClass("active")}var n={};e(".shab__global-settings-btn").on("click",function(){e(this).hasClass("active")?s():a()}),e("body").on("click click.body.iframe",function(a){0==e(a.target).closest(e(".shab__global-settings-btn").add(e(".shab__global-settings"))).size()&&e(".shab__global-settings-btn").hasClass("active")&&s()})}(),function(){function a(){if(s.sessionGroupSynchronizations.length){var a,n=void 0!==e.cookie("adaptive_pixel_perfect_groups_session");if(n){a=e.secureEvalJSON(e.cookie("adaptive_pixel_perfect_groups_session")).groups;var t={};for(var o in s.sessionGroupSynchronizations){var i=s.sessionGroupSynchronizations[o];t[i.name]=i}a.filter(function(e,a,s){return e in t}),e.cookie("adaptive_pixel_perfect_groups_session",e.toJSON({groups:a})),a.length||(e.removeCookie("adaptive_pixel_perfect_groups_session"),n=!1,a=[])}var l={};for(var p in a)l[a[p]]=!0;var r="";for(var o in s.sessionGroupSynchronizations){var c=s.sessionGroupSynchronizations[o],d={};for(var p in c.synchroParams)d[c.synchroParams[p]]=!0;var m=n&&c.name in l?"active":"";r+='<li class="shab__session-groups-list-item '+m+'" data-name="'+c.name+'"><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("pages"in d?"active":"")+'" data-param="pages"><i class="fa fa-file-o"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("resolutions"in d?"active":"")+'" data-param="resolutions"><i class="fa fa-arrows"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("iframe"in d?"active":"")+'" data-param="iframe"><i class="fa fa-desktop"></i></button><button class="btn btn-default btn-xs btn-block shab__session-groups-list-btn">'+c.name+'</button><div class="btn btn-default btn-xs shab__session-groups-btn-drag"><span class="glyphicon glyphicon-move"></span></div></li>'}e(".shab__session-groups-list-ul").empty().append(r)}else void 0!==e.cookie("adaptive_pixel_perfect_groups_session")&&e.removeCookie("adaptive_pixel_perfect_groups_session")}e(".pmv__btn-open-groups-session").on("click",function(){e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active")});var n=!1;e("body").on("click click.body.iframe",function(a){0!=e(a.target).closest(e(".pmv__btn-open-groups-session").add(e(".shab__session-groups-list"))).length||n||e(".pmv__btn-open-groups-session").hasClass("active")&&e(".pmv__select-page-open-list").removeClass("active")}),e(".shab__session-groups-list").append("<ul class='shab__session-groups-list-ul'></ul>"),a(),e(".shab__session-groups-list-ul").sortable({axis:"y",items:"> li"}).disableSelection()}(),function(){function a(e){console.log(e)}function n(){var a=s.getLocalSessionParams();c=!1;var n=e(".pmv__pages-sortable");n.empty();var o=function e(s,n){n+="<ul>";for(var t in s){var o="page"==s[t].type?s[t].urn:s[t].name,i="page"==s[t].type?"page":"group btn-yellow",l="page"==s[t].type&&a&&"pages"in a&&a.pages.currentPage===o?"active":"";n+="<li class='pmv__pages-item "+("collapsed"in s[t]&&s[t].collapsed?"collapsed":"")+"' data-type='"+s[t].type+"' data-name='"+o+"'>",n+='<div class="pmv__pages-item-content"><button class="btn btn-default btn-xs pmv__pages-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><button class="btn btn-default btn-xs btn-block pmv__pages-btn-'+i+" "+l+'">'+o+'</button><div class="btn btn-default btn-xs pmv__pages-btn-drag"><span class="glyphicon glyphicon-move"></span></div></div>',"sub"in s[t]&&(n=e(s[t].sub,n)),n+="</li>"}return n+="</ul>"}(s.globalSession.pages,"",0);n.append(o),n.find(" > ul").nestedSortable({forcePlaceholderSize:!0,handle:"div",items:"li",placeholder:"placeholder",revert:250,tabSize:25,toleranceElement:"> div",listType:"ul",helper:"clone",maxLevels:3,isTree:!0,start:function(){c=!0},stop:function(){c=!1},update:function(e,a){i(n),p(n),l(n),s.data.pages=t(n),s.savePages()}}),p(n),r(n)}function t(a){var s=[],n=0,t={0:s};return a.find(".pmv__pages-item").each(function(){var a=e(this).parents(".pmv__pages-item").length;if(a>n){var s=t[n][t[n].length-1];"sub"in s||(s.sub=[],t[a]=s.sub),t[a].push(o(e(this)))}else t[a].push(o(e(this)));n=a}),s}function o(e){var a={};return a.type=e.attr("data-type"),"page"==e.attr("data-type")?a.urn=e.attr("data-name"):a.name=e.attr("data-name"),e.hasClass("collapsed")&&(a.collapsed=!0),a}function i(a){a.find(" ul").addClass("not-childrens"),a.find(" ul > li").each(function(){e(this).parent().removeClass("not-childrens")}),console.log(a.find(" ul.not-childrens").length),a.find(" ul.not-childrens").remove()}function l(a){a.find(" .pmv__pages-item").each(function(){e(this).hasClass("have-nested")||e(this).removeClass("collapsed")})}function p(a){a.find(" .pmv__pages-item").removeClass("have-nested"),a.find(" ul").each(function(){e(this).parent(".pmv__pages-item").length&&e(this).parent(".pmv__pages-item").addClass("have-nested")})}function r(e){e.find(" .pmv__pages-item.collapsed > ul").css({display:"none"}),e.find(" .pmv__pages-item > ul").not(e.find(" .pmv__pages-item.collapsed > ul")).css({display:"block"})}pageManagerVisualizator=new modules.pageManagerVisualizator(e("#wrap_iframe"),s,{$mapNavigatorContainer:e(".mnif__navigator-window"),nameIFrame:"PP_iframe",pixelsScrollableInSeconds:2e3,minWOuterScroll:23,minHOuterScroll:23,minWDraggable:15,minHDraggable:15,minWIFrame:320,minHIFrame:480,responsiveToMovementOfTheCursorInAConfinedSpace:!0,movementOfTheCursorInAConfinedSpaceSpred:10,gorizontalFixation:"center",verticalFixation:"top"}),e(".pmv__pages-sortable-scrollwrap").mCustomScrollbar({axis:"y",theme:"dark",scrollbarPosition:"outside",scrollInertia:100,mouseWheel:{scrollAmount:100},callbacks:{onUpdate:function(){e(".pmv__pages-sortable-scrollwrap").hasClass("_mCS_1 mCS_no_scrollbar")?e(".pmv__pages-window").addClass("no-scrollbar"):e(".pmv__pages-window").removeClass("no-scrollbar")}}}),e(".pmv__select-page-open-list").on("click",function(){e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active")});var c=!1;e("body").on("click click.body.iframe",function(a){0!=e(a.target).closest(e(".pmv__select-page-open-list").add(e(".pmv__pages-window")).add(e("#modal-pmv-add-page-href"))).length||c||e(".pmv__select-page-open-list").hasClass("active")&&e(".pmv__select-page-open-list").removeClass("active")}),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-page",function(){e(".pmv__pages-btn-page").removeClass("active"),e(this).addClass("active"),pageManagerVisualizator.handlerSelectPage(e(this).closest(".pmv__pages-item").attr("data-name")),e(".pmv__select-page-open-list").hasClass("active")&&e(".pmv__select-page-open-list").removeClass("active")}),e("body").on("pmv.user.changepage",function(){s.changePage(pageManagerVisualizator.currentPage)}),e("body").on("synchro.changed_page",function(a,n){e(".pmv__pages-btn-page").removeClass("active"),e(".pmv__pages-item[data-name='"+n+"'] > * > .pmv__pages-btn-page").addClass("active"),s.selectPage(n)}),e("#modal-pmv-add-page-href .btn-select").on("click",function(s){a(e("#modal-pmv-add-page-href .pmv-href").val()),e("#modal-pmv-add-page-href .modal").modal("hide")}),e(".pmv__add-page").on("click",function(){pageManagerVisualizator._options.nameIFrame in window&&e("#modal-pmv-add-page-href .pmv-href").val(window[pageManagerVisualizator._options.nameIFrame].window.location.href),e("#modal-pmv-add-page-href .modal").modal("show")}),e("#modal-pmv-add-page-href").on("shown.bs.modal",function(a){var s=e("#modal-pmv-add-page-href .pmv-href");s.get(0).focus()}),e(".shab__top-menu .select-page.selectpicker").on("selectpicker.refresh",function(){e(".shab__top-menu .select-page .delete").on("click",function(a){return a.stopPropagation(),confirm("Точно удалить!")&&pageManagerVisualizator.removePage(e(this).attr("data-href")),!1})}),e(".pmv__update-iframe-btn").on("click",pageManagerVisualizator.reloadPage),pageManagerVisualizator.$container.on("pmv.change.pagelist",n),n(),e(".pmv__pages-sortable").on("click"," .pmv__pages-btn-collapsed",function(){var a=e(this).closest(".pmv__pages-item");a.hasClass("collapsed")?a.removeClass("collapsed").find(" > ul").css({display:"block"}):a.addClass("collapsed").find(" > ul").css({display:"none"})}),pageManagerVisualizator.$container.on({"pmv.prepaste.iframe":function(){e("#loading").css({width:"100%",height:"100%"}).addClass("show")},"pmv.load.iframe":function(){e("#loading").removeClass("show"),setTimeout(function(){e("#loading").css({width:"0",height:"0"})},500)}}),pageManagerVisualizator._create()}(),e(document).ready(function(){e("#testovaya_ssilka").on("click",function(e){})}),e(document).ready(function(){e('[data-toggle="tooltip"]').tooltip(),e('[data-toggle="popover"]').popover()})}e("body").on("keydown",function(e){49==e.which&&e.altKey&&(e=e||window.e,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault())});var s,n=io.connect("/");n.once("session.load",function(e){s=new modules.sessionModel(e,n),a()})});
//# sourceMappingURL=main.js.map
