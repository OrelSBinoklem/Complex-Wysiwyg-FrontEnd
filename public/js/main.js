jQuery(function(s){function e(){!function(){function e(){"openOptionsTimeLine__close"in t&&t.openOptionsTimeLine__close.pause(),s(" .shab__global-settings").css({display:"block",opacity:0,transform:"scale(0.8, 0.8)"}),"openOptionsTimeLine"in t?t.openOptionsTimeLine.restart():t.openOptionsTimeLine=(new TimelineLite).append([TweenMax.to(s(".shab__global-settings"),.5,{css:{transform:"scale(1, 1)"}}),TweenMax.to(s(".shab__global-settings"),.3,{css:{opacity:1}})]),s(".shab__global-settings-btn").addClass("active")}function a(){function e(){s(".shab__global-settings").css("display","none")}"openOptionsTimeLine"in t&&t.openOptionsTimeLine.pause(),"openOptionsTimeLine__close"in t?t.openOptionsTimeLine__close.restart():t.openOptionsTimeLine__close=(new TimelineLite).append([TweenMax.to(s(".shab__global-settings"),.5,{css:{transform:"scale(0.8, 0.8)"},onComplete:e}),TweenMax.to(s(".shab__global-settings"),.5,{css:{opacity:0}})]),s(".shab__global-settings-btn").removeClass("active")}var t={};s(".shab__global-settings-btn").on("click",function(){s(this).hasClass("active")?a():e()}),s("body").on("click click.body.iframe",function(e){0==s(e.target).closest(s(".shab__global-settings-btn").add(s(".shab__global-settings"))).size()&&s(".shab__global-settings-btn").hasClass("active")&&a()})}(),function(){function e(){if(a.data.sessionGroupSynchronizations.length){var e,t=void 0!==s.cookie("adaptive_pixel_perfect_groups_session");if(t){e=s.secureEvalJSON(s.cookie("adaptive_pixel_perfect_groups_session")).groups;var n={};for(var o in a.data.sessionGroupSynchronizations){var p=a.data.sessionGroupSynchronizations[o];n[p.name]=p}e.filter(function(s,e,a){return s in n}),s.cookie("adaptive_pixel_perfect_groups_session",s.toJSON({groups:e})),e.length||(s.removeCookie("adaptive_pixel_perfect_groups_session"),t=!1,e=[])}var i={};for(var l in e)i[e[l]]=!0;var r="";for(var o in a.data.sessionGroupSynchronizations){var d=a.data.sessionGroupSynchronizations[o],c={};for(var l in d.synchroParams)c[d.synchroParams[l]]=!0;var _=t&&d.name in i?"active":"";r+='<li class="shab__session-groups-list-item '+_+'" data-name="'+d.name+'"><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("pages"in c?"active":"")+'" data-param="pages"><i class="fa fa-file-o"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("resolutions"in c?"active":"")+'" data-param="resolutions"><i class="fa fa-arrows"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn '+("iframe"in c?"active":"")+'" data-param="iframe"><i class="fa fa-desktop"></i></button><button class="btn btn-default btn-xs btn-block shab__session-groups-list-btn '+_+'">'+d.name+'</button><div class="btn btn-default btn-xs shab__session-groups-btn-drag"><span class="glyphicon glyphicon-move"></span></div><button class="btn btn-default btn-xs shab__session-groups-delete-btn"><span class="glyphicon glyphicon-remove"></span></button></li>'}s(".shab__session-groups-list-ul").empty().append(r)}else void 0!==s.cookie("adaptive_pixel_perfect_groups_session")&&s.removeCookie("adaptive_pixel_perfect_groups_session")}function t(e){var a=[];return e.find(" .shab__session-groups-list-ul > li").each(function(){var e=[];s(this).find(" .shab__session-groups-synchro-params-btn.active").each(function(){e.push(s(this).attr("data-param"))}),a.push({name:s(this).attr("data-name"),synchroParams:e})}),a}function n(){a.onChangeSessionGroups(t(s(".shab__session-groups-list")))}function o(){a.onChangeSessionGroups(t(s(".shab__session-groups-list")))}function p(){a.onChangeSessionGroups(t(s(".shab__session-groups-list")))}function i(s,e){a.onSessionActivatedGroup(s,e)}function l(s,e,t){a.onSessionActivatedParam(s,e,t)}s(".shab__btn-open-groups-session").on("click",function(){s(this).hasClass("active")?(s(this).removeClass("active"),s(".shab__session-groups-list").removeClass("open")):(s(this).addClass("active"),s(".shab__session-groups-list").addClass("open"))}),s("body").on("click click.body.iframe",function(e){0==s(e.target).closest(s(".shab__btn-open-groups-session").add(s(".shab__session-groups-list")).add(s("#shab-add-group-session")).add(s("#shab-delete-group-session"))).length&&(s(".shab__btn-open-groups-session").removeClass("active"),s(".shab__session-groups-list").removeClass("open"))}),s(".shab__session-groups-list").prepend("<ul class='shab__session-groups-list-ul'></ul>"),e(),s(".shab__session-groups-list-ul").sortable({axis:"y",items:"> li",placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,update:function(){n()}}).disableSelection(),s(".shab__add-group-session").on("click",function(){s("#shab-add-group-session .modal").modal("show")}),s("#shab-add-group-session .btn-select").on("click",function(){var e=s("#shab-add-group-session .shab-add-group-session__name").val();if(s.trim(e)){var a='<li class="shab__session-groups-list-item" data-name="'+s.trim(e)+'"><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="pages"><i class="fa fa-file-o"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="resolutions"><i class="fa fa-arrows"></i></button><button class="btn btn-default btn-xs shab__session-groups-synchro-params-btn" data-param="iframe"><i class="fa fa-desktop"></i></button><button class="btn btn-default btn-xs btn-block shab__session-groups-list-btn">'+s.trim(e)+'</button><div class="btn btn-default btn-xs shab__session-groups-btn-drag"><span class="glyphicon glyphicon-move"></span></div><button class="btn btn-default btn-xs shab__session-groups-delete-btn"><span class="glyphicon glyphicon-remove"></span></button></li>';s(".shab__session-groups-list-ul").append(a),o()}else alert("Имя недолжно быть пустым");s("#shab-add-group-session .modal").modal("hide")}),s(".shab__session-groups-list").on("click"," .shab__session-groups-delete-btn",function(){s("#shab-delete-group-session .modal").modal("show");var e=s(this).closest(".shab__session-groups-list-item").attr("data-name");s("#shab-delete-group-session .shab-delete-group-session__name").attr("data-name",e).text(e)}),s("#shab-delete-group-session .btn-select").on("click",function(){s(".shab__session-groups-list-item[data-name='"+s("#shab-delete-group-session .shab-delete-group-session__name").attr("data-name")+"']").remove(),p(),s("#shab-delete-group-session .modal").modal("hide")}),s(".shab__session-groups-list").on("click"," .shab__session-groups-list-btn",function(){s(".shab__session-groups-list.open").length&&(s(this).hasClass("active")?s(this).removeClass("active").closest(".shab__session-groups-list-item").removeClass("active"):s(this).addClass("active").closest(".shab__session-groups-list-item").addClass("active"),i(s(this).closest(".shab__session-groups-list-item").attr("data-name"),s(this).hasClass("active")))}),s(".shab__session-groups-list").on("click"," .shab__session-groups-synchro-params-btn",function(){s(this).hasClass("active")?s(this).removeClass("active"):s(this).addClass("active"),l(s(this).closest(".shab__session-groups-list-item").attr("data-name"),s(this).attr("data-param"),s(this).hasClass("active"))}),a.responseHandlers.onChangeSessionGroups=function(){e()},a.responseHandlers.onSessionActivatedParam=function(){e()}}(),function(){function e(s,e){return'<li class="pmv__pages-item" data-type="'+s+'" data-name="'+e+'"><div class="pmv__pages-item-content"><button class="btn btn-default btn-xs pmv__pages-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><button class="btn btn-default btn-xs btn-block pmv__pages-btn-name pmv__pages-btn-'+("page"==s?"page":"group btn-yellow")+'">'+e+'</button><button class="btn btn-default btn-xs pmv__pages-btn-delete"><span class="glyphicon glyphicon-remove"></span></button><button class="btn btn-default btn-xs pmv__pages-btn-edit"><span class="glyphicon glyphicon-edit"></span></button><div class="btn btn-default btn-xs pmv__pages-btn-drag"><span class="glyphicon glyphicon-move"></span></div></div></li>'}function t(){var e=a.getLocalSessionParams();d=!1;var t=s(".pmv__pages-sortable-ul");t.empty();var n=function s(a,t){for(var n in a){var o="page"==a[n].type?a[n].urn:a[n].name,p="page"==a[n].type?"page":"group btn-yellow",i="page"==a[n].type&&e&&"pages"in e&&e.pages.currentPage===o?"active":"";t+="<li class='pmv__pages-item "+("collapsed"in a[n]&&a[n].collapsed?"collapsed":"")+"' data-type='"+a[n].type+"' data-name='"+o+"'>",t+='<div class="pmv__pages-item-content"><button class="btn btn-default btn-xs pmv__pages-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><button class="btn btn-default btn-xs btn-block pmv__pages-btn-name pmv__pages-btn-'+p+" "+i+'">'+o+'</button><button class="btn btn-default btn-xs pmv__pages-btn-delete"><span class="glyphicon glyphicon-remove"></span></button><button class="btn btn-default btn-xs pmv__pages-btn-edit"><span class="glyphicon glyphicon-edit"></span></button><div class="btn btn-default btn-xs pmv__pages-btn-drag"><span class="glyphicon glyphicon-move"></span></div></div>',"sub"in a[n]&&(t=s(a[n].sub,t+"<ul>")+"</ul>"),t+="</li>"}return t}(a.data.globalSession.pages,"");t.append(n),l(s(".pmv__pages-sortable")),r(s(".pmv__pages-sortable"))}function n(e){var a=[],t=0,n={0:a};return e.find(".pmv__pages-item").each(function(){var e=s(this).parents(".pmv__pages-item").length;if(e>t){var a=n[t][n[t].length-1];"sub"in a||(a.sub=[],n[e]=a.sub),n[e].push(o(s(this)))}else n[e].push(o(s(this)));t=e}),a}function o(s){var e={};return e.type=s.attr("data-type"),"page"==s.attr("data-type")?e.urn=s.attr("data-name"):e.name=s.attr("data-name"),s.hasClass("collapsed")&&(e.collapsed=!0),e}function p(e){e.find(" ul").addClass("not-childrens"),e.find(" ul > li").each(function(){s(this).parent().removeClass("not-childrens")}),e.find(" ul.not-childrens").remove()}function i(e){e.find(" .pmv__pages-item").each(function(){s(this).hasClass("have-nested")||s(this).removeClass("collapsed")})}function l(e){e.find(" .pmv__pages-item").removeClass("have-nested"),e.find(" ul").each(function(){s(this).parent(".pmv__pages-item").length&&s(this).parent(".pmv__pages-item").addClass("have-nested")})}function r(s){s.find(" .pmv__pages-item.collapsed > ul").css({display:"none"}),s.find(" .pmv__pages-item > ul").not(s.find(" .pmv__pages-item.collapsed > ul")).css({display:"block"})}pageManagerVisualizator=new modules.pageManagerVisualizator(s("#wrap_iframe"),a,{$mapNavigatorContainer:s(".mnif__navigator-window"),nameIFrame:"PP_iframe",pixelsScrollableInSeconds:2e3,minWOuterScroll:23,minHOuterScroll:23,minWDraggable:15,minHDraggable:15,minWIFrame:320,minHIFrame:480,responsiveToMovementOfTheCursorInAConfinedSpace:!0,movementOfTheCursorInAConfinedSpaceSpred:10,gorizontalFixation:"center",verticalFixation:"top"}),s(".pmv__pages-sortable-scrollwrap").mCustomScrollbar({axis:"y",theme:"dark",scrollbarPosition:"outside",scrollInertia:100,mouseWheel:{scrollAmount:100}}),s(".pmv__select-page-open-list").on("click",function(){s(this).toggleClass("active")});var d=!1;s("body").on("click click.body.iframe",function(e){0!=s(e.target).closest(s(".pmv__select-page-open-list").add(s(".pmv__pages-window, #modal-pmv-add-page-href, #pmv__modal-add-group, #shab__page-or-group-delete, #shab__page-or-group-update"))).length||d||s(".pmv__select-page-open-list").removeClass("active")}),s(".pmv__pages-sortable").on("click"," .pmv__pages-btn-page",function(){s(".pmv__pages-btn-page").removeClass("active"),s(this).addClass("active"),pageManagerVisualizator.handlerSelectPage(s(this).closest(".pmv__pages-item").attr("data-name")),s(".pmv__select-page-open-list").hasClass("active")&&s(".pmv__select-page-open-list").removeClass("active")}),s("body").on("pmv.user.changepage",function(){a.changePage(pageManagerVisualizator.currentPage)}),s("body").on("synchro.changed_page",function(e,t){s(".pmv__pages-btn-page").removeClass("active"),s(".pmv__pages-item[data-name='"+t+"'] > * > .pmv__pages-btn-page").addClass("active"),a.selectPage(t)}),s("#modal-pmv-add-page-href .btn-select").on("click",function(t){var n=s("#modal-pmv-add-page-href .pmv-href").val();s(".pmv__modal-urn-exists").css({display:""}),s(".pmv__modal-urn-empty").css({display:""}),s(".pmv__modal-add-page-content").removeClass("has-error"),s.trim(n)?a.getPage(n)===!1?function(){s(".pmv__pages-sortable > ul").prepend(e("page",s.trim(n))),s("#modal-pmv-add-page-href .modal").modal("hide")}():(s(".pmv__modal-urn-exists").css({display:"block"}),s(".pmv__modal-add-page-content").addClass("has-error")):(s(".pmv__modal-urn-empty").css({display:"block"}),s(".pmv__modal-add-page-content").addClass("has-error"))}),s(".pmv__add-page").on("click",function(){s(".pmv__modal-urn-exists").css({display:""}),s(".pmv__modal-urn-empty").css({display:""}),s(".pmv__modal-add-page-content").removeClass("has-error"),pageManagerVisualizator._options.nameIFrame in window&&s("#modal-pmv-add-page-href .pmv-href").val(window[pageManagerVisualizator._options.nameIFrame].window.location.href),s("#modal-pmv-add-page-href .modal").modal("show")}),s("#modal-pmv-add-page-href").on("shown.bs.modal",function(e){s("#modal-pmv-add-page-href .pmv-href").get(0).focus()}),s("#pmv__modal-add-group .btn-select").on("click",function(t){var n=s("#pmv__modal-add-group .pmv__modal-name-group").val();s("#pmv__modal-add-group .pmv__modal-name-exists").css({display:""}),s("#pmv__modal-add-group .pmv__modal-name-empty").css({display:""}),s(".pmv__modal-add-group-content").removeClass("has-error"),s.trim(n)?a.getGroup(n)===!1?function(){s(".pmv__pages-sortable > ul").prepend(e("group",s.trim(n))),s("#pmv__modal-add-group .modal").modal("hide")}():(s(".pmv__modal-name-exists").css({display:"block"}),s(".pmv__modal-add-group-content").addClass("has-error")):(s("#pmv__modal-add-group .pmv__modal-name-empty").css({display:"block"}),s(".pmv__modal-add-group-content").addClass("has-error"))}),s(".pmv__add-group").on("click",function(){s("#pmv__modal-add-group .pmv__modal-name-exists").css({display:""}),s("#pmv__modal-add-group .pmv__modal-name-empty").css({display:""}),s(".pmv__modal-add-group-content").removeClass("has-error"),s("#pmv__modal-add-group .modal").modal("show")}),s(".pmv__pages-sortable").on("click"," .pmv__pages-btn-delete",function(){s(this).closest(".pmv__pages-item").hasClass("have-nested")?s("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").css({display:"inline-block"}):s("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").css({display:"none"}),s("#shab__page-or-group-delete .modal").modal("show");var e=s(this).closest(".pmv__pages-item").attr("data-name"),a=s(this).closest(".pmv__pages-item").attr("data-type");s("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name",e).text(e),s("#shab__page-or-group-delete .shab__page-or-group__type").text("page"==a?"страницу":"группу")}),s("#shab__page-or-group-delete .shab__page-or-group-delete-btn").on("click",function(){var e=s("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name"),a=s(".pmv__pages-item[data-name='"+e+"'] > ul > .pmv__pages-item").remove();s(".pmv__pages-item[data-name='"+e+"']").after(a),s(".pmv__pages-item[data-name='"+e+"']").remove();var t=s(".pmv__pages-sortable");p(t),l(t),i(t),s("#shab__page-or-group-delete .modal").modal("hide")}),s("#shab__page-or-group-delete .shab__page-or-group-delete-nested-btn").on("click",function(){s(".pmv__pages-item[data-name='"+s("#shab__page-or-group-delete .shab__page-or-group__name").attr("data-name")+"']").remove();var e=s(".pmv__pages-sortable");p(e),l(e),i(e),s("#shab__page-or-group-delete .modal").modal("hide")}),s(".pmv__pages-sortable").on("click"," .pmv__pages-btn-edit",function(){s("#shab__page-or-group-update .modal").modal("show");var e=s(this).closest(".pmv__pages-item").attr("data-name"),a=s(this).closest(".pmv__pages-item").attr("data-type");s("#shab__page-or-group-update .shab__page-or-group__name").attr("data-name",e),s("#shab__page-or-group-update .shab__page-or-group-update__name").val(e),s("#shab__page-or-group-update .shab__page-or-group__type").attr("data-type",a).text("page"==a?"новый URN":"новое имя")}),s("#shab__page-or-group-update .btn-select").on("click",function(){function e(){s(".pmv__pages-sortable .pmv__pages-item[data-type='"+n+"'][data-name='"+t+"']").attr("data-name",o).find(" > * > .pmv__pages-btn-name").text(o),s("#shab__page-or-group-update .modal").modal("hide")}var t=s("#shab__page-or-group-update .shab__page-or-group__name").attr("data-name"),n=s("#shab__page-or-group-update .shab__page-or-group__type").attr("data-type"),o=s("#shab__page-or-group-update .shab__page-or-group-update__name").val();s("#shab__page-or-group-update .pmv__modal-urn-exists").css({display:""}),s("#shab__page-or-group-update .pmv__modal-name-exists").css({display:""}),s("#shab__page-or-group-update .pmv__modal-empty").css({display:""}),s("#shab__page-or-group-update .pmv__modal-content").removeClass("has-error"),"page"==n?s.trim(o)?a.getPage(o)===!1?e():(s("#shab__page-or-group-update .pmv__modal-urn-exists").css({display:"block"}),s("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):(s("#shab__page-or-group-update .pmv__modal-empty").css({display:"block"}),s("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):s.trim(o)?a.getGroup(o)===!1?e():(s("#shab__page-or-group-update .pmv__modal-name-exists").css({display:"block"}),s("#shab__page-or-group-update .pmv__modal-content").addClass("has-error")):(s("#shab__page-or-group-update .pmv__modal-empty").css({display:"block"}),s("#shab__page-or-group-update .pmv__modal-content").addClass("has-error"))}),s(".pmv__pages-sortable").prepend("<ul class='pmv__pages-sortable-ul'></ul>"),s(".pmv__pages-sortable-ul").nestedSortable({forcePlaceholderSize:!0,handle:"div",items:"li",placeholder:"placeholder",revert:250,tabSize:25,toleranceElement:"> div",listType:"ul",helper:"clone",maxLevels:3,isTree:!0,start:function(){d=!0},stop:function(){d=!1},update:function(e,t){var o=s(".pmv__pages-sortable");p(o),l(o),i(o),a.data.pages=n(o),a.savePages()}}),pageManagerVisualizator.$container.on("pmv.change.pagelist",t),t(),s(".pmv__pages-sortable").on("click"," .pmv__pages-btn-collapsed",function(){var e=s(this).closest(".pmv__pages-item");e.hasClass("collapsed")?e.removeClass("collapsed").find(" > ul").css({display:"block"}):e.addClass("collapsed").find(" > ul").css({display:"none"})}),pageManagerVisualizator.$container.on({"pmv.prepaste.iframe":function(){s("#loading").css({width:"100%",height:"100%"}).addClass("show")},"pmv.load.iframe":function(){s("#loading").removeClass("show"),setTimeout(function(){s("#loading").css({width:"0",height:"0"})},500)}}),pageManagerVisualizator._create()}(),function(){function e(s,e,a,t,n,o,p,i){var l=s.find(" .pp__deviation-fixed-or-static label").first(),r=s.find(" .pp__deviation-fixed-or-static label").last();"static"==e?(l.removeClass("btn-default").addClass("btn-primary active"),l.find(" input").prop("checked",!0),r.addClass("btn-default").removeClass("btn-danger active"),r.find(" input").prop("checked",!1)):(l.addClass("btn-default").removeClass("btn-primary active"),l.find(" input").prop("checked",!1),r.removeClass("btn-default").addClass("btn-danger active"),r.find(" input").prop("checked",!0));var d=s.find(" .pp__deviation-relative");"static"==e?(d.addClass("pp__deviation-static").removeClass("pp__deviation-fixed"),d.find(" .btn[data-top!='top']").addClass("disabled")):(d.removeClass("pp__deviation-static").addClass("pp__deviation-fixed"),d.find(" .btn[data-top!='top']").removeClass("disabled")),d.find(" .btn").removeClass("active btn-danger").addClass("btn-default"),d.find(" .btn[data-left='"+a+"'][data-top='"+t+"']").addClass("active btn-danger").removeClass("btn-default");var c=s.find(" .pp__deviation-input");c.filter(".pp__deviation-left-px").val(n),c.filter(".pp__deviation-left-percent").val(o),c.filter(".pp__deviation-top-px").val(p),c.filter(".pp__deviation-top-percent").val(i)}function t(s){s.find(" .pp__deviation-left-px").add(s.find(" .pp__deviation-top-px")).spinner({min:-99999,max:99999,start:function(){},spin:function(){},stop:function(){}}),s.find(" .pp__deviation-left-percent").add(s.find(" .pp__deviation-top-percent")).spinner({min:-9999,max:9999,step:.1,start:function(){},spin:function(){},stop:function(){}})}function n(s,e,t){if(s in t&&e.w+"|"+e.h in t[s]){var n=a.getScreenshotsObjList(),o=t[s][e.w+"|"+e.h],p="";for(var i in o){var r=o[i];"static"==r.pos&&(r.t="top"),l.push({pos:r.pos,l:r.l,t:r.t,lpx:r.lpx,lper:r.lper,tpx:r.tpx,tper:r.tper}),p+='<li class="pp__resolutions-list-screenshot" data-urn="'+r.urn+'" data-w="'+n[r.urn].w+'" data-h="'+n[r.urn].h+'"><div class="pp__screenshot-content"><button class="btn btn-default btn-xs btn-block pp__screenshot-name-btn '+(r.active?"active":"")+'"><div class="btn btn-default btn-xs pp__resolutions-screenshots-btn-size" data-w="'+n[r.urn].w+'" data-h="'+n[r.urn].h+'"><span class="pp__screenshot-name-btn-w">'+n[r.urn].w+'</span> | <span class="pp__screenshot-name-btn-h">'+n[r.urn].h+"</span></div>"+r.urn+'</button><button class="btn btn-default btn-xs pp__resolutions-screenshots-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-screenshots-drag-btn"><span class="glyphicon glyphicon-move"></span></div><button class="pp__resolutions-screenshots-btn-deviation btn btn-default btn-xs"><i class="glyphicon glyphicon-option-vertical" aria-hidden="true"></i></button></div></li>'}return p}return""}function o(){s(".pp__resolutions-list-screenshots").sortable({revert:!0,cursor:"move",axis:"y",items:" > li",distance:5,connectWith:".pp__resolutions-list-screenshots",placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,remove:function(s,e){},stop:function(){}})}function p(e){e.find(" .pp__screenshots-item").removeClass("have-nested"),e.find(" ul").each(function(){s(this).parent(".pp__screenshots-item").length&&s(this).parent(".pp__screenshots-item").addClass("have-nested")}),e.find(" .pp__screenshots-item").each(function(){s(this).hasClass("have-nested")||s(this).removeClass("collapsed")}),e.find(" .pp__screenshots-item.collapsed > ul").css({display:"none"}),e.find(" .pp__screenshots-item > ul").not(e.find(" .pp__screenshots-item.collapsed > ul")).css({display:"block"})}function i(e){switch(s(".pp__verstka-design .btn").removeClass("active btn-primary btn-success btn-info btn-warning btn-danger").addClass("btn-default"),e){case 0:s(".pp__verstka-btn").removeClass("btn-default").addClass("active btn-primary");break;case 1:s(".pp__50p-btn").removeClass("btn-default").addClass("active btn-warning");break;case 2:s(".pp__design-btn").removeClass("btn-default").addClass("active btn-danger")}}pixelPerfect=new modules.pixelPerfect(s("#wrap_iframe .pmv-fitting-wrap"),{dirScrins:"design-screenshots",nameIFrame:"PP_iframe"}),pageManagerVisualizator.$container.on("pmv.load.iframe",function(){pixelPerfect._destroy(),pixelPerfect._create();var s=a.getCurrentRelatedScreenshotsCollection();null!==s&&pixelPerfect.refreshScrins(s,a.getScreenshotsObjList())}),s(".pp__screenshots-menu-scrollwrap, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").mCustomScrollbar({axis:"y",theme:"dark",scrollbarPosition:"outside",scrollInertia:100,mouseWheel:{scrollAmount:100},callbacks:{onUpdate:function(){}}}),s(".pp__btn-open-screenshots").on("click",function(){s(this).hasClass("active")?(s(this).removeClass("active"),s(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap").removeClass("open")):(s(this).addClass("active"),s(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap").addClass("open"))}),s("body").on("click click.body.iframe",function(e){0==s(e.target).closest(s(".pp__btn-open-screenshots").add(s(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap, .pp__resolutions-menu, #pp__modal-add-resolution, #pp__modal-delete-resolution"))).length&&(s(".pp__btn-open-screenshots").removeClass("active"),s(".pp__screenshots-menu-window, .pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").removeClass("open"))}),s("#pp__modal-add-resolution .btn-select").on("click",function(e){var t=!1,n=s.trim(s("#pp__modal-add-resolution .pp__modal-add-resolution-w").val()),o=s.trim(s("#pp__modal-add-resolution .pp__modal-add-resolution-h").val());if(/^[1-9]\w{2,4}$/gim.test(n)&&parseInt(n)>=320&&parseInt(n)<=99999||(t=!0,s("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").addClass("has-error"),s("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:"block"})),"auto"==o||/^[1-9]\w{2,4}$/gim.test(o)&&parseInt(o)>=320&&parseInt(o)<=99999||(t=!0,s("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").addClass("has-error"),s("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:"block"})),!t)for(var p in a.data.globalSession.resolutions){var i=a.data.globalSession.resolutions[p];if(parseInt(n)===i.w&&("auto"===o||parseInt(o)===i.h)){t=!0,s("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").addClass("has-error"),s("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").addClass("has-error"),s("#pp__modal-add-resolution .pp__modal-val-exists").css({display:"block"});break}}if(!t){var l="<li class='pp__resolutions-list-resolution' data-w='"+n+"' data-h='"+o+'\'><div class="pp__resolutions-list-resolution-content"><button class="btn btn-default btn-xs btn-block pp__resolutionforscreen-name-btn"><span class="pp__resolutionforscreen-name-btn-w">'+n+'</span> | <span class="pp__resolutionforscreen-name-btn-h">'+o+'</span></button><button class="btn btn-default btn-xs pp__resolutions-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-drag-btn"><span class="glyphicon glyphicon-move"></span></div></div><ul class="pp__resolutions-list-screenshots"></ul></li>';s(".pp__resolutions-screenshots-list").prepend(l),s("#pp__modal-add-resolution .modal").modal("hide")}}),s(".pp__add-resolution-btn").on("click",function(){s("#pp__modal-add-resolution .pp__modal-val-exists").css({display:""}),s("#pp__modal-add-resolution .pp__modal-val-not-digit").css({display:""}),s("#pp__modal-add-resolution .pp__modal-add-resolution-w-group").removeClass("has-error"),s("#pp__modal-add-resolution .pp__modal-add-resolution-h-group").removeClass("has-error"),s("#pp__modal-add-resolution .modal").modal("show")}),s(".pp__screenshots-menu").on("click"," .pp__resolutions-delete-btn",function(){var e=s(this).closest(".pp__resolutions-list-resolution").attr("data-w"),a=s(this).closest(".pp__resolutions-list-resolution").attr("data-h");s("#pp__modal-delete-resolution .pp__modal-delete-resolution-w").attr("data-w",e).text(e),s("#pp__modal-delete-resolution .pp__modal-delete-resolution-h").attr("data-h",a).text(a),s("#pp__modal-delete-resolution .modal").modal("show")}),s("#pp__modal-delete-resolution .btn-select").on("click",function(){s('.pp__screenshots-menu .pp__resolutions-list-resolution[data-w="'+s("#pp__modal-delete-resolution .pp__modal-delete-resolution-w").attr("data-w")+'"][data-h="'+s("#pp__modal-delete-resolution .pp__modal-delete-resolution-h").attr("data-h")+'"]').remove(),s("#pp__modal-delete-resolution .modal").modal("hide")}),s(".pp__screenshots-files-menu-scrollwrap").on("click"," .pp__screenshots-btn-add-screenshot",function(){if(s(".pp__screenshots-menu-scrollwrap .pp__resolutions-list-resolution").length){var e=s(this).closest(".pp__screenshots-item"),a=e.attr("data-urn"),t=e.find(" .pp__screenshots-btn-size"),n=t.attr("data-w"),o=t.attr("data-h"),p='<li class="pp__resolutions-list-screenshot" data-urn="'+a+'" data-w="'+n+'" data-h="'+o+'"><div class="pp__screenshot-content"><button class="btn btn-default btn-xs btn-block pp__screenshot-name-btn"><div class="btn btn-default btn-xs pp__resolutions-screenshots-btn-size" data-w="'+n+'" data-h="'+o+'"><span class="pp__screenshot-name-btn-w">'+n+'</span> | <span class="pp__screenshot-name-btn-h">'+o+"</span></div>"+a+'</button><button class="btn btn-default btn-xs pp__resolutions-screenshots-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-screenshots-drag-btn"><span class="glyphicon glyphicon-move"></span></div><button class="pp__resolutions-screenshots-btn-deviation btn btn-default btn-xs"><i class="glyphicon glyphicon-option-vertical" aria-hidden="true"></i></button></div></li>';s(".pp__screenshots-menu-scrollwrap .pp__resolutions-list-screenshots").first().prepend(s(p).data("deviation",{pos:"static",l:"center",t:"top",lpx:0,lper:0,tpx:0,tper:0}))}}),s(".pp__screenshots-menu").on("click"," .pp__resolutions-screenshots-delete-btn",function(e){e.stopPropagation(),s(this).closest(".pp__resolutions-list-screenshot").remove()}),s(".pp__screenshots-menu").on("click"," .pp__resolutions-screenshots-btn-deviation",function(a){var t=s(this).closest(".pp__resolutions-list-screenshot").data("deviation");s(".pp__deviation").data("deviation",t),e(s(".pp__deviation"),t.pos,t.l,t.t,t.lpx,t.lper,t.tpx,t.tper),s(".pp__deviation").addClass("open")}),s("body").on("click click.body.iframe",function(e){0==s(e.target).closest(s(".pp__resolutions-screenshots-btn-deviation").add(s(".pp__deviation"))).length&&s(".pp__deviation").removeClass("open")}),function(){var e=a.getLocalSessionParams(),t=s(".pp__resolutions-list");if(t.empty(),e&&"pages"in e&&null!==e.pages.currentPage){var n=function(s,a){for(var t in s){var n=s[t],o=n.w,p=n.h,i=e&&"resolutions"in e&&e.resolutions.currentResolution.w===o&&e.resolutions.currentResolution.h===p?"active":"";a+="<li class='pp__resolutions-list-item' data-w='"+o+"' data-h='"+p+"'>",a+='<div class="pp__resolutions-list-item-content"><button class="btn btn-default btn-xs btn-block pp__resolution-name-btn '+i+'"><span class="pp__resolution-name-btn-w">'+o+'</span> | <span class="pp__resolution-name-btn-h">'+p+"</span></button></div>",a+="</li>"}return a}(a.data.globalSession.resolutions,"");t.append(n)}}(),s(".pp__screenshots-menu").prepend("<ul class='pp__resolutions-screenshots-list'></ul>"),function(){var e=a.getLocalSessionParams();l=[];var t=s(".pp__resolutions-screenshots-list");if(t.empty(),e&&"pages"in e&&null!==e.pages.currentPage){var p=function(s,t){for(var o in s){var p=s[o],i=p.w,l=p.h,r=e&&"resolutions"in e&&e.resolutions.currentResolution.w===i&&e.resolutions.currentResolution.h===l?"active":"";t+="<li class='pp__resolutions-list-resolution' data-w='"+i+"' data-h='"+l+"'>",t+='<div class="pp__resolutions-list-resolution-content"><button class="btn btn-default btn-xs btn-block pp__resolutionforscreen-name-btn '+r+'"><span class="pp__resolutionforscreen-name-btn-w">'+i+'</span> | <span class="pp__resolutionforscreen-name-btn-h">'+l+'</span></button><button class="btn btn-default btn-xs pp__resolutions-delete-btn"><span class="glyphicon glyphicon-remove"></span></button><div class="btn btn-default btn-xs pp__resolutions-drag-btn"><span class="glyphicon glyphicon-move"></span></div></div>',t+="<ul class='pp__resolutions-list-screenshots'>"+n(e.pages.currentPage,p,a.data.globalSession.designScreenshotsRelatedResolutionAndPage)+"</ul>",t+="</li>"}return t}(a.data.globalSession.resolutions,"");t.append(p);var i=0;t.find(" .pp__resolutions-list-screenshot").each(function(){s(this).data("deviation",l[i]),i++})}o()}(),s(".pp__resolutions-screenshots-list").sortable({revert:!0,cursor:"move",axis:"y",items:" > li",distance:5,placeholder:"placeholder",forceHelperSize:!0,forcePlaceholderSize:!0,stop:function(){}});var l;!function(){
s(".pp__screenshots-menu-window").append('<div class="pp__deviation panel panel-primary"><div class="panel-body"><div class="row"><div class="col-xs-6 pp__deviation-col-left"><form class="pp__deviation-fixed-or-static btn-group-vertical btn-toggle-one-color" data-toggle="buttons"><label class="btn" data-btn-color="primary"><input type="radio" name="sm-radio-fixed-or-static" value="1" />Static</label><label class="btn" data-btn-color="danger"><input type="radio" name="sm-radio-fixed-or-static" value="0" />Fixed</label></form></div><div class="col-xs-6 pp__deviation-col-right"><div class="pp__deviation-relative btn-group-table"><div class="btn-group btn-group-justified" role="group"><div class="btn" data-left="left" data-top="top" role="button">&nbsp</div><div class="btn" data-left="center" data-top="top" role="button">&nbsp</div><div class="btn" data-left="right" data-top="top" role="button">&nbsp</div></div><div class="btn-group btn-group-justified" role="group"><div class="btn disabled" data-left="left" data-top="center" role="button">&nbsp</div><div class="btn disabled" data-left="center" data-top="center" role="button">&nbsp</div><div class="btn disabled" data-left="right" data-top="center" role="button">&nbsp</div></div><div class="btn-group btn-group-justified" role="group"><div class="btn disabled" data-left="left" data-top="bottom" role="button">&nbsp</div><div class="btn disabled" data-left="center" data-top="bottom" role="button">&nbsp</div><div class="btn disabled" data-left="right" data-top="bottom" role="button">&nbsp</div></div></div></div></div><div class="row row-name-px-percent"><div class="col-xs-6 pp__deviation-col-left"><p>px</p></div><div class="col-xs-6 pp__deviation-col-right"><p>%</p></div></div><div class="row row-otklonenie-1"><div class="col-xs-6 pp__deviation-col-left"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-left-px"><div class="input-group-addon"><span class="fa fa-long-arrow-right"></span></div></div></div><div class="col-xs-6 pp__deviation-col-right"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-left-percent"><div class="input-group-addon"><span class="fa fa-long-arrow-right"></span></div></div></div></div><div class="row row-otklonenie-2"><div class="col-xs-6 pp__deviation-col-left"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-top-px"><div class="input-group-addon">&nbsp<span class="fa fa-long-arrow-down"></span>&nbsp</div></div></div><div class="col-xs-6 pp__deviation-col-right"><div class="input-group"><input type="text" class="form-control input-sm pp__deviation-input pp__deviation-top-percent"><div class="input-group-addon">&nbsp<span class="fa fa-long-arrow-down"></span>&nbsp</div></div></div></div></div></div>'),t(s(".pp__deviation"))}(),s(".pp__screenshots-files-menu-scrollwrap").prepend('<ul class="pp__screenshots-files-list"></ul>'),function(){var e=(a.getLocalSessionParams(),s(".pp__screenshots-files-list"));e.empty();var t=function s(e,t){for(var n in e){var o=e[n],p={};for(key in a.data.globalSession.designScreenshotsFoldersUncollapsed)p[a.data.globalSession.designScreenshotsFoldersUncollapsed[key]]=!0;var i="file"==o.type?"file":"folder btn-yellow";t+="<li class='pp__screenshots-item "+(o.urn in p?"":"collapsed")+"' data-type='"+o.type+"' data-name='"+o.name+"' data-urn='"+o.urn+"'>",t+='<div class="pp__screenshots-item-content"><button class="btn btn-default btn-xs pp__screenshots-btn-collapsed"><span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-plus"></span></button><div class="btn btn-default btn-xs btn-block pp__screenshots-btn-name pp__screenshots-btn-'+i+'">'+("file"==o.type?'<div class="btn btn-default btn-xs pp__screenshots-btn-size" data-w="'+o.w+'" data-h="'+o.h+'"><span class="pp__screenshots-btn-size-w">'+o.w+'</span> | <span class="pp__screenshots-btn-size-h">'+o.h+"</span></div>":"")+o.name+"</div>"+("file"==o.type?'<button class="btn btn-success btn-xs pp__screenshots-btn-add-screenshot"><span class="glyphicon glyphicon-plus-sign"></span></button>':"")+"</div>","sub"in o&&(t=s(o.sub,t+"<ul>")+"</ul>"),t+="</li>"}return t}(a.data.globalSession.designScreenshots,"");e.append(t),p(s(".pp__screenshots-files-menu-scrollwrap"))}(),s(".pp__screenshots-files-list").on("click"," .pp__screenshots-btn-collapsed",function(){var e=s(this).closest(".pp__screenshots-item");e.hasClass("collapsed")?e.removeClass("collapsed").find(" > ul").css({display:"block"}):e.addClass("collapsed").find(" > ul").css({display:"none"})});var r=null;s(".pp__screenshots-files-menu-scrollwrap").on("mouseenter"," .pp__screenshots-item[data-type='file']",function(){s(".pp__screenshot-thumbnail").empty().append('<img src="/design-screenshots/design-thumbnails/'+s(this).attr("data-urn")+'" width="320" height="auto" />'),s(".pp__screenshot-thumbnail-scrollwrap").addClass("open"),s(".pp__screenshots-files-menu-scrollwrap").addClass("shadow-hidden")}),s(".pp__screenshots-files-menu-scrollwrap, .pp__screenshot-thumbnail-scrollwrap").on({mouseenter:function(){null!==r&&clearTimeout(r)},mouseleave:function(){r=setTimeout(function(){r=null,s(".pp__screenshot-thumbnail-scrollwrap").removeClass("open"),s(".pp__screenshots-files-menu-scrollwrap").removeClass("shadow-hidden")},10)}}),s(".shab__top-menu").on("change"," .select-group",function(){var e=s(".shab__top-menu .select-group option:selected");pixelPerfect.selectSize(e.attr("data-width"),e.attr("data-height"))}),s(".pp__verstka-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(0),i()}),s(".pp__50p-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(1),i()}),s(".pp__design-btn").on("click",function(){pixelPerfect.showPageProofsOrDesign(2),i()}),pageManagerVisualizator.$container.on("pmv.load.iframe",function(){s("body").add(s("#"+pageManagerVisualizator._options.nameIFrame).contents().find("body")).on("keydown",function(e){81!=e.which||!e.ctrlKey||e.shiftKey||e.altKey||(s(".pp__50p-btn, .pp__design-btn").hasClass("active")?pixelPerfect.showPageProofsOrDesign(0):pixelPerfect.showPageProofsOrDesign(1),e=e||window.e,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault())})})}(),s(document).ready(function(){s("#testovaya_ssilka").on("click",function(s){})}),s(document).ready(function(){s('[data-toggle="tooltip"]').tooltip(),s('[data-toggle="popover"]').popover()})}s("body").on("keydown",function(s){49==s.which&&s.altKey&&(s=s||window.e,s.stopPropagation?s.stopPropagation():s.cancelBubble=!0,s.preventDefault())});var a,t=io.connect("/");t.once("session.load",function(s){a=new modules.sessionModel(s,t),e()})});
//# sourceMappingURL=main.js.map
